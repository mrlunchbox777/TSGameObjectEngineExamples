!function(e){var t={};function i(s){if(t[s])return t[s].exports;var r=t[s]={i:s,l:!1,exports:{}};return e[s].call(r.exports,r,r.exports,i),r.l=!0,r.exports}i.m=e,i.c=t,i.d=function(e,t,s){i.o(e,t)||Object.defineProperty(e,t,{enumerable:!0,get:s})},i.r=function(e){"undefined"!=typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(e,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(e,"__esModule",{value:!0})},i.t=function(e,t){if(1&t&&(e=i(e)),8&t)return e;if(4&t&&"object"==typeof e&&e&&e.__esModule)return e;var s=Object.create(null);if(i.r(s),Object.defineProperty(s,"default",{enumerable:!0,value:e}),2&t&&"string"!=typeof e)for(var r in e)i.d(s,r,function(t){return e[t]}.bind(null,r));return s},i.n=function(e){var t=e&&e.__esModule?function(){return e.default}:function(){return e};return i.d(t,"a",t),t},i.o=function(e,t){return Object.prototype.hasOwnProperty.call(e,t)},i.p="",i(i.s=24)}([function(e,t,i){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var s=i(15);t.Camera=s.Camera;var r=i(5);t.Canvas=r.Canvas;var n=i(18);t.Collider=n.Collider;var o=i(7);t.RectCollider=o.RectCollider;var a=i(19);t.Debug=a.Debug;var l=i(26);t.GameLauncher=l.GameLauncher;var c=i(2);t.GameManager=c.GameManager;var h=i(9);t.GameObject=h.GameObject;var u=i(6);t.HudGameObject=u.HudGameObject;var m=i(27);t.Level=m.Level;var d=i(28);t.SpritesheetAnimation=d.SpritesheetAnimation;var p=i(29);t.SpritesheetAnimationSet=p.SpritesheetAnimationSet;var b=i(30);t.StressTestSquare=b.StressTestSquare;var g=i(4);t.Time=g.Time;var y=i(17);t.Transform=y.Transform;var f=i(20);t.Utils=f.Utils;var S=i(3);t.Vector2=S.Vector2;var w=i(31);t.VectorN=w.VectorN;var T=i(16);t.Input=T.Input;var v=i(10);t.Keys=v.Keys},function(e,t,i){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var s=i(41);t.Tile=s.Tile;var r=i(42);t.TileBricksBrown=r.TileBricksBrown;var n=i(43);t.TileBricksTopBrown=n.TileBricksTopBrown;var o=i(44);t.TileCloudBottom=o.TileCloudBottom;var a=i(45);t.TileCloudBottomLeft=a.TileCloudBottomLeft;var l=i(46);t.TileCloudBottomRight=l.TileCloudBottomRight;var c=i(47);t.TileCloudTop=c.TileCloudTop;var h=i(48);t.TileCloudTopLeft=h.TileCloudTopLeft;var u=i(49);t.TileCloudTopRight=u.TileCloudTopRight;var m=i(50);t.TileHillCenterGreen=m.TileHillCenterGreen;var d=i(51);t.TileHillCenterSpotsLeftGreen=d.TileHillCenterSpotsLeftGreen;var p=i(52);t.TileHillCenterSpotsRightGreen=p.TileHillCenterSpotsRightGreen;var b=i(53);t.TileHillLeftGreen=b.TileHillLeftGreen;var g=i(54);t.TileHillRightGreen=g.TileHillRightGreen;var y=i(55);t.TileHillTopGreen=y.TileHillTopGreen;var f=i(56);t.TileQuestionMark=f.TileQuestionMark;var S=i(57);t.TileRocksBrown=S.TileRocksBrown;var w=i(58);t.TileTubeBottomLeft=w.TileTubeBottomLeft;var T=i(59);t.TileTubeBottomRight=T.TileTubeBottomRight;var v=i(60);t.TileTubeTopLeft=v.TileTubeTopLeft;var x=i(61);t.TileTubeTopRight=x.TileTubeTopRight},function(e,t,i){"use strict";Object.defineProperty(t,"__esModule",{value:!0});const s=i(15),r=i(3),n=i(16),o=i(5),a=i(4),l=i(19),c=i(7),h=i(10);class u{static start(e={}){for(let t in e)this.options[t]=e[t];this.screenSize=r.Vector2.zero,this.options.screenWidth&&(this.screenSize.x=this.options.screenWidth),this.options.screenHeight&&(this.screenSize.y=this.options.screenHeight),0==Object.keys(this.options.levelClasses).length&&console.error("You must provide at least one level in the `levelClasses` options."),this.camera=new s.Camera,o.Canvas.create(),n.Input.init(),requestAnimationFrame(()=>{this.gameLoop.bind(this)();let e=null;for(let t in this.options.levelClasses){e=t;break}e?this.options.initialLevel?this.loadLevel(this.options.initialLevel):this.loadLevel(e):console.error("No `levelClasses` provided in options")})}static get unitSize(){return u.currentLevel.unitSize}static get hudUnitSize(){return u.currentLevel.hudUnitSize}static registerGameObject(e){this.currentLevel.registerGameObject(e)}static destroy(e){for(let t of this.currentLevel.gameObjects){let i=t.currentCollidingObjects.indexOf(e);-1!=i&&t.currentCollidingObjects.splice(i,1)}for(let t=0;t<this.currentLevel.gameObjects.length;t++)if(this.currentLevel.gameObjects[t]==e){this.currentLevel.gameObjects.splice(t,1);break}for(let t of this.currentLevel.gameObjects)t.removeAllReferencesToGameObject(e)}static gameLoop(e=null){requestAnimationFrame(this.gameLoop.bind(this)),a.Time.update(),this.update(),this.currentLevel&&(this.currentLevel.updateAnimations(),o.Canvas.wipe(),this.currentLevel.draw(),this.showingDebug&&o.Canvas.drawUnitSizeGrid())}static update(){this.currentLevel&&(this.currentLevel.update(),this.handleCollisions(),this.camera.update(),this.showingDebug&&l.Debug.update(),this.options.allowToggleDebug&&n.Input.keys(h.Keys.ControlLeft)&&n.Input.keys(h.Keys.AltLeft)&&n.Input.keys(h.Keys.ShiftLeft)&&(n.Input.keys(h.Keys.KeyZ)&&(this.pressedZ=!0),this.pressedZ&&!n.Input.keys(h.Keys.KeyZ)&&(this.pressedZ=!1,this.showingDebug=!this.showingDebug,this.showingDebug?l.Debug.start(this.options):l.Debug.stop())))}static handleCollisions(){this.collidersChecked=0,this.collidersTotal=0;let e=this.currentLevel.gameObjects;for(let t=0;t<e.length;t++){let i=e[t];if(i.collider)for(let t=0;t<e.length;t++){let s=e[t];if(s.collider&&(i!=s&&i.inViewOfCamera&&s.inViewOfCamera)){this.collidersTotal++,this.collidersChecked++;let e=!1,t=!1;if((s.collider.allowPassThroughWhitelist||[]).length)for(let e of s.collider.allowPassThroughWhitelist)i instanceof e&&(t=!0);if(i.collider instanceof c.RectCollider&&s.collider instanceof c.RectCollider){let r=i.rectColliderSize().magnitude()+s.rectColliderSize().magnitude();if(i.colliderPosition().distance(s.colliderPosition())>r){this.collidersChecked--;continue}let n=i.rectColliderSize().scale(u.unitSize),o=s.rectColliderSize().scale(u.unitSize),a=i.colliderPosition().scale(u.unitSize).subtract(n.scale(.5)),l=s.colliderPosition().scale(u.unitSize).subtract(o.scale(.5));if(a.x<l.x+o.x&&a.x+n.x>l.x&&a.y<l.y+o.y&&a.y+n.y>l.y)if(s.collider.allowPassThroughWhitelist)if(t)e=!0;else{let e=i.colliderPosition(),t=i.rectColliderSize(),r=s.colliderPosition(),n=s.rectColliderSize(),o=[Math.abs(e.y-t.y/2-(r.y+n.y/2)),Math.abs(e.y+t.y/2-(r.y-n.y/2)),Math.abs(e.x-t.x/2-(r.x+n.x/2)),Math.abs(e.x+t.x/2-(r.x-n.x/2))],a=o.indexOf(Math.min(...o)),l=i.transform.position.clone();if(0==a?l.y=r.y+n.y/2+t.y/2+i.transform.position.y-e.y:1==a?l.y=r.y-n.y/2-t.y/2+i.transform.position.y-e.y:l.x=2==a?r.x+n.x/2+t.x/2+i.transform.position.x-e.x:r.x-n.x/2-t.x/2+i.transform.position.x-e.x,i.transform.position=l,o[a]>.1){let e=null;switch(a){case 0:e="top";break;case 1:e="bottom";break;case 2:e="left";break;case 3:e="right"}i.onNoPassthroughTouch(s,e)}}else e=!0}if(e)-1==i.currentCollidingObjects.indexOf(s)&&(i.currentCollidingObjects.push(s),i.onCollisionEnter(s));else if(-1!=i.currentCollidingObjects.indexOf(s))for(let e=i.currentCollidingObjects.length-1;e>=0;e--)i.currentCollidingObjects[e]==s&&(i.currentCollidingObjects.splice(e,1),i.onCollisionLeave(s))}}}}static loadLevel(e){if(!this.options.levelClasses[e])return void console.error(`Level class of name ${e} was never defined. `+"Make sure you register it in your game launcher.");this.showingDebug&&l.Debug.reset(),this.camera.follow(null),this.currentLevel=new this.options.levelClasses[e],this.currentLevel.init();let t=this.currentLevel.backgroundColor||this.options.backgroundColor;t&&o.Canvas.setBackgroundColor(t)}}u.camera=null,u.currentLevel=null,u.screenSize=null,u.options={parentElementID:null,screenWidth:800,screenHeight:600,imageAntiAliasing:!1,layers:1,showDebug:!1,backgroundColor:"#000000",border:"1px solid #444444",allowToggleDebug:!1,levelClasses:{},initialLevel:"",font:"monospace"},u.showingDebug=!1,u.pressedZ=!1,u.collidersTotal=0,u.collidersChecked=0,t.GameManager=u},function(e,t,i){"use strict";Object.defineProperty(t,"__esModule",{value:!0});class s{constructor(e,t){this.x=e,this.y=t}static get zero(){return new s(0,0)}clone(){return new s(this.x,this.y)}add(e){let t=this.clone();return t.x+=e.x,t.y+=e.y,t}subtract(e){let t=this.clone();return t.x-=e.x,t.y-=e.y,t}scale(e){let t=this.clone();return t.x*=e,t.y*=e,t}abs(){let e=this.clone();return e.x=Math.abs(e.x),e.y=Math.abs(e.y),e}dot(e){return this.x*e.x+this.y+e.y}moveTowards(e,t){if(t<=0)return console.warn("Vector2().moveTowards() called with step <= 0"),this;if(this.subtract(e).magnitude()<t)return e;let i=e.subtract(this).normalize();return this.add(i.scale(t))}magnitude(){return Math.sqrt(this.magnitudeSqr())}magnitudeSqr(){return this.x*this.x+this.y*this.y}distance(e){return Math.sqrt(this.distanceSqr(e))}distanceSqr(e){let t=this.x-e.x,i=this.y-e.y;return t*t+i*i}normalize(){let e=this.magnitude(),t=this.clone();return Math.abs(e)<1e-9?(t.x=0,t.y=0):(t.x/=e,t.y/=e),t}angle(){return Math.atan2(this.y,this.x)}rotate(e){let t=Math.cos(e),i=Math.sin(e),r=new s(0,0);return r.x=this.x*t-this.y*i,r.y=this.x*i+this.y*t,r}equals(e){return this.x==e.x&&this.y==e.y}toString(){return"["+this.x+", "+this.y+"]"}}t.Vector2=s},function(e,t,i){"use strict";Object.defineProperty(t,"__esModule",{value:!0});class s{static update(){let e=(new Date).getTime();s.deltaTime=e-s.time,s.time=e}}s.time=0,s.deltaTime=0,t.Time=s},function(e,t,i){"use strict";Object.defineProperty(t,"__esModule",{value:!0});const s=i(2),r=i(3),n=i(6);class o{static create(){this.gameCanvas=document.createElement("canvas"),this.gameCanvas.id="game-canvas",this.gameCanvas.classList.add("canvas"),this.gameCanvas.style.border=s.GameManager.options.border,this.gameCanvas.style.backgroundColor=s.GameManager.options.backgroundColor,this.gameCanvas.width=s.GameManager.options.screenWidth,this.gameCanvas.height=s.GameManager.options.screenHeight,this.gameCanvas.style.width=s.GameManager.options.screenWidth+"px",this.gameCanvas.style.height=s.GameManager.options.screenHeight+"px";let e=document.getElementById(s.GameManager.options.parentElementID);(e||document.body).appendChild(this.gameCanvas),this.context=this.gameCanvas.getContext("2d",{alpha:!1}),this.context.imageSmoothingEnabled=s.GameManager.options.imageAntiAliasing,this.context.shadowBlur=0}static wipe(){this.context.setTransform(1,0,0,1,0,0),this.context.clearRect(0,0,this.gameCanvas.width,this.gameCanvas.height)}static setFillStyle(e){this.context.fillStyle=e}static setStrokeStyle(e){this.context.strokeStyle=e}static setLineWidth(e){this.context.lineWidth=e}static drawGameObjectImage(e){let t=e.image,i=s.GameManager.camera,r=e.transform,o=e.absolutePosition,a=e.absoluteSize,l=r.rotation;if(i.inViewOfGameObject(e)){let c=e instanceof n.HudGameObject?e.getHudDrawPosition():i.relativeWorldspacePosition(o),h=s.GameManager.screenSize;this.context.setTransform(1,0,0,1,c.x+h.x/2,c.y+h.y/2),this.context.rotate(-l),this.flipCanvas(r.size),this.context.drawImage(t,-a.x/2,-a.y/2,a.x,a.y),this.flipCanvas(r.size)}}static drawGameObjectPartialImage(e,t,i){let r=e.image,o=s.GameManager.camera,a=e.unitSize,l=e.transform,c=e.absolutePosition,h=l.size.scale(a),u=l.rotation;if(o.inViewOfGameObject(e)){let a=e instanceof n.HudGameObject?e.getHudDrawPosition():o.relativeWorldspacePosition(c),m=s.GameManager.screenSize;this.context.setTransform(1,0,0,1,a.x+m.x/2,a.y+m.y/2),this.context.rotate(-u),this.flipCanvas(l.size),this.context.drawImage(r,t.x,t.y,i.x,i.y,-h.x/2,-h.y/2,h.x,h.y),this.flipCanvas(l.size)}}static drawGameObject(e){if(e.spritesheetAnimationSet){e.image=s.GameManager.currentLevel.cachedImages[e.spritesheetAnimationSet.imageSrc];let t=e.spritesheetAnimationSet.currentAnimationTransform;o.drawGameObjectPartialImage(e,t.position,t.size)}else if(e.imageSrc)if(e.image=s.GameManager.currentLevel.cachedImages[e.imageSrc],e.imageBounds){let t=e.imageBounds.position.clone(),i=e.imageBounds.size.clone();o.drawGameObjectPartialImage(e,t,i)}else o.drawGameObjectImage(e);else e.shapeFillStyle&&"rectangle"==e.shape&&o.fillGameObjectRect(e),e.shapeStrokeStyle&&"rectangle"==e.shape&&o.strokeGameObjectRect(e);e.transform;(s.GameManager.showingDebug||e.showTransform)&&o.strokeGameObjectRect(e),e.collider&&s.GameManager.showingDebug&&this.strokeGameObjectCollider(e),this.drawGameObjectText(e)}static drawGameObjectText(e){if(e.text){let t=e.textColor||"#000000",i=s.GameManager.camera,r=e.unitSize,o=e.transform,a=e.absolutePosition,l=o.size.scale(r),c=o.rotation,h=e instanceof n.HudGameObject?e.getHudDrawPosition():i.relativeWorldspacePosition(a);this.setTransform(h),this.context.rotate(-c),this.flipCanvas(o.size);let u="";u+=e.textBold?"bold ":"",u+=e.textItalic?"italic ":"",u+=r+"px ",u+=e.textFont||s.GameManager.options.font,this.context.font=u,this.context.textAlign=e.textAlign||"center",this.setFillStyle(t),this.context.fillText(e.text,0,0,Math.abs(l.x))}}static strokeRect(e,t,i,r,n=0){let a=s.GameManager.camera;o.setStrokeStyle(i);let l=r?a.relativeWorldspacePosition(e):e;this.setTransform(l),this.context.rotate(-n),o.context.strokeRect(-t.x/2,-t.y/2,t.x,t.y)}static strokeGameObjectRect(e){let t=e.transform,i=t.position.scale(e.unitSize),s=t.size.scale(e.unitSize),r=e.shapeStrokeStyle,o=!(e instanceof n.HudGameObject);r||(r=e.transformColor||"#FF0000"),r&&this.strokeRect(i,s,r,o,t.rotation)}static fillRect(e,t,i,r,n=0){let a=s.GameManager.camera;o.setFillStyle(i);let l=r?a.relativeWorldspacePosition(e):e;this.setTransform(l),this.context.rotate(-n),o.context.fillRect(-t.x/2,-t.y/2,t.x,t.y)}static fillGameObjectRect(e){let t=e.transform,i=t.position.scale(e.unitSize),s=t.size.scale(e.unitSize),r=e.shapeFillStyle,o=!(e instanceof n.HudGameObject);r||(r=e.transformColor||"#FF0000"),r&&this.fillRect(i,s,r,o,t.rotation)}static setTransform(e){let t=s.GameManager.screenSize;this.context.setTransform(1,0,0,1,e.x+t.x/2,e.y+t.y/2)}static strokeGameObjectCollider(e){let t=e.colliderColor||"#00FF00",i=e.colliderPosition().scale(e.unitSize),s=e.rectColliderSize().scale(e.unitSize),r=!(e instanceof n.HudGameObject);e.inViewOfCamera&&this.strokeRect(i,s,t,r)}static flipCanvas(e){let t=e.x<0,i=e.y<0;(t||i)&&this.context.scale(t?-1:1,i?-1:1)}static drawUnitSizeGrid(e="#FFFFFF44"){this.setTransform(new r.Vector2(0,0));let t=s.GameManager.screenSize.scale(.5);this.context.strokeStyle=e;let i=s.GameManager.currentLevel.unitSize;this.setLineWidth(1);for(let e=0;e<t.x;e+=i)this.context.beginPath(),this.context.moveTo(e,-t.y),this.context.lineTo(e,t.y),this.context.stroke(),this.context.beginPath(),this.context.moveTo(-e,-t.y),this.context.lineTo(-e,t.y),this.context.stroke();for(let e=0;e<t.y;e+=i)this.context.beginPath(),this.context.moveTo(-t.x,e),this.context.lineTo(t.x,e),this.context.stroke(),this.context.beginPath(),this.context.moveTo(-t.x,-e),this.context.lineTo(t.x,-e),this.context.stroke()}static setBackgroundColor(e){this.gameCanvas.style.backgroundColor=e}}o.gameCanvas=null,o.context=null,t.Canvas=o},function(e,t,i){"use strict";Object.defineProperty(t,"__esModule",{value:!0});const s=i(9),r=i(2);class n extends s.GameObject{constructor(e){super(e.gameObjectParams||{}),this.neverSkipUpdate=!0}getHudDrawPosition(){return this.transform.position.scale(this.unitSize)}get absoluteSize(){return this.transform.size.scale(this.unitSize)}get absolutePosition(){return this.transform.position.scale(this.unitSize)}get unitSize(){return r.GameManager.hudUnitSize}}t.HudGameObject=n},function(e,t,i){"use strict";Object.defineProperty(t,"__esModule",{value:!0});const s=i(18),r=i(3);class n extends s.Collider{constructor(e){super(e),this.size=(e.size||new r.Vector2(1,1)).clone()}}t.RectCollider=n},function(e,t,i){"use strict";Object.defineProperty(t,"__esModule",{value:!0});const s=i(0);class r extends s.GameObject{constructor(){super(),this.arrangement=[],this.layer=1,this.innerColor="#aaaaaa",this.outerColor="#000000",this.movingDown=!0}update(){this.transform.position.y+=.1}draw(){for(let e=0;e<this.arrangement.length;e++)for(let t=0;t<this.arrangement[e].length;t++){if(!this.arrangement[e][t])continue;let i=this.transform,r=i.size.scale(this.unitSize),n=i.position.scale(this.unitSize);n.x+=t*this.unitSize,n.y+=e*this.unitSize,s.Canvas.strokeRect(n,r,this.outerColor,!0),s.Canvas.fillRect(n,r,this.innerColor,!0)}}}t.Piece=r},function(e,t,i){"use strict";Object.defineProperty(t,"__esModule",{value:!0});const s=i(17),r=i(2),n=i(7),o=i(3),a=i(5);t.GameObject=class{constructor(e={}){this.layer=0,this.neverSkipUpdate=!1,this.name="",this.imageSrc=null,this.imageBounds=null,this.spritesheetAnimationSet=null,this.collider=null,this.colliderColor=null,this.transform=new s.Transform({}),this.currentCollidingObjects=[],this.text=null,this.textFont=null,this.textColor=null,this.textAlign=null,this.textBold=!1,this.textItalic=!1,this.showTransform=!1,this.transformColor=null,this.shape=null,this.shapeFillStyle=null,this.shapeStrokeStyle=null,this.image=null,this.inViewOfCamera=!1,this.children=[];for(let t in e)this[t]=e[t];this.imageSrc&&(this.image=r.GameManager.currentLevel.cachedImages[this.imageSrc]),r.GameManager.registerGameObject(this)}getCurrentSpritesheetAnimationInfo(){if(this.spritesheetAnimationSet){let e=this.spritesheetAnimationSet.currentAnimationName;return{name:e,index:this.spritesheetAnimationSet.spritesheetAnimations[e].index}}return null}addChild(e){this.children.push(e)}setDefaultCollider(){this.collider=new n.RectCollider({position:o.Vector2.zero,size:new o.Vector2(1,1)})}colliderPosition(){let e=this.transform,t=this.collider.position.clone();return t.x*=e.size.x,t.y*=-e.size.y,e.position.add(t)}rectColliderSize(){if(this.collider&&this.collider instanceof n.RectCollider){let e=this.transform.size.abs(),t=this.collider.size.abs();return t.x*=e.x,t.y*=e.y,t}return null}getLayer(){return this.layer}update(){}updateAnimations(){this.spritesheetAnimationSet&&this.spritesheetAnimationSet.update()}draw(){a.Canvas.drawGameObject(this)}removeAllReferencesToGameObject(e){for(let t in this)if(null!=this[t])if(this[t].constructor===Array)for(let i=this[t].length-1;i>=0;i--)this[t][i]===e&&(this[t][i]=null);else if(this[t]===e)this[t]=null;else if("object"==typeof this[t])for(let i in this[t])this[t][i]===e&&(this[t][i]=null)}get absoluteSize(){return this.transform.size.scale(this.unitSize)}get absolutePosition(){return this.transform.position.scale(this.unitSize)}get unitSize(){return r.GameManager.unitSize}onCollisionEnter(e){}onCollisionLeave(e){}onNoPassthroughTouch(e,t){}}},function(e,t,i){"use strict";Object.defineProperty(t,"__esModule",{value:!0});class s{}s.Tab="Tab",s.ControlLeft="ControlLeft",s.ControlRight="ControlRight",s.AltLeft="AltLeft",s.AltRight="AltRight",s.ShiftLeft="ShiftLeft",s.ShiftRight="ShiftRight",s.Escape="Escape",s.Space="Space",s.ArrowUp="ArrowUp",s.ArrowDown="ArrowDown",s.ArrowLeft="ArrowLeft",s.ArrowRight="ArrowRight",s.Key0="Key0",s.Key1="Key1",s.Key2="Key2",s.Key3="Key3",s.Key4="Key4",s.Key5="Key5",s.Key6="Key6",s.Key7="Key7",s.Key8="Key8",s.Key9="Key9",s.KeyA="KeyA",s.KeyB="KeyB",s.KeyC="KeyC",s.KeyD="KeyD",s.KeyE="KeyE",s.KeyF="KeyF",s.KeyG="KeyG",s.KeyH="KeyH",s.KeyI="KeyI",s.KeyJ="KeyJ",s.KeyK="KeyK",s.KeyL="KeyL",s.KeyM="KeyM",s.KeyN="KeyN",s.KeyO="KeyO",s.KeyP="KeyP",s.KeyQ="KeyQ",s.KeyR="KeyR",s.KeyS="KeyS",s.KeyT="KeyT",s.KeyU="KeyU",s.KeyV="KeyV",s.KeyW="KeyW",s.KeyX="KeyX",s.KeyY="KeyY",s.KeyZ="KeyZ",s.F1="F1",s.F2="F2",s.F3="F3",s.F4="F4",s.F5="F5",s.F6="F6",s.F7="F7",s.F8="F8",s.F9="F9",s.F10="F10",s.F11="F11",s.F12="F12",s.Backquote="Backquote",s.Slash="Slash",s.Period="Period",s.Comma="Comma",s.Quote="Quote",s.Semicolon="Semicolon",s.BracketRight="BracketRight",s.BracketLeft="BracketLeft",s.Backslash="Backslash",s.Backspace="Backspace",s.Equals="Equals",s.Minus="Minus",t.Keys=s},function(e,t,i){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var s=i(34);t.OverworldBackground=s.OverworldBackground;var r=i(35);t.Player=r.Player;var n=i(36);t.Soldier=n.Soldier;var o=i(37);t.SoldierBlue=o.SoldierBlue;var a=i(38);t.SoldierGreen=a.SoldierGreen},function(e,t,i){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var s=i(40);t.LevelController=s.LevelController;var r=i(62);t.PlayableLevel=r.PlayableLevel;var n=i(63);t.Level01=n.Level01;var o=i(64);t.Level01Controller=o.Level01Controller},function(e,t,i){"use strict";Object.defineProperty(t,"__esModule",{value:!0});class s{}t.Data=s,s.lives=3,s.score=0,s.coins=0,s.world=1,s.level=1,s.time=366,s.hud=null},function(e,t,i){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var s=i(68);t.LandingObject=s.LandingObject;var r=i(69);t.LogSmall=r.LogSmall;var n=i(70);t.Player=n.Player;var o=i(71);t.River=o.River;var a=i(72);t.RiverBank=a.RiverBank},function(e,t,i){"use strict";Object.defineProperty(t,"__esModule",{value:!0});const s=i(3),r=i(2),n=i(6);t.Camera=class{constructor(){this._worldspacePosition=null,this._previousWorldspacePosition=null,this.gameObjectToFollow=null,this._worldspacePosition=s.Vector2.zero}get worldspacePosition(){return this._worldspacePosition.clone()}set worldspacePosition(e){this._worldspacePosition=e.clone().scale(r.GameManager.currentLevel.unitSize)}follow(e){this.gameObjectToFollow=e}following(){return this.gameObjectToFollow}update(){this.gameObjectToFollow?this._worldspacePosition=this.gameObjectToFollow.absolutePosition:this._previousWorldspacePosition&&(this._worldspacePosition=this._previousWorldspacePosition.scale(r.GameManager.currentLevel.unitSize)),this._previousWorldspacePosition=this._worldspacePosition.scale(1/r.GameManager.currentLevel.unitSize)}inViewOfGameObject(e,t=null){return e instanceof n.HudGameObject||this.inViewOf(e.absolutePosition,e.absoluteSize,t)}inViewOf(e,t,i=null){let s=r.GameManager.screenSize.clone();i&&(s=s.add(i));let n=t.scale(.5);return e.x+n.x>this._worldspacePosition.x-s.x/2&&e.y+n.y>this._worldspacePosition.y-s.y/2&&e.x-n.x<this._worldspacePosition.x+s.x/2&&e.y-n.y<this._worldspacePosition.y+s.y/2}relativeWorldspacePosition(e){return e.subtract(this._worldspacePosition)}}},function(e,t,i){"use strict";Object.defineProperty(t,"__esModule",{value:!0});const s=i(3),r=i(5),n=i(2),o=i(10);class a{static init(){document.onkeydown=a.getKeyDown,document.onkeyup=a.getKeyUp;for(let e of[r.Canvas.gameCanvas])e.addEventListener("mousedown",this.mousedown),e.addEventListener("mouseup",this.mouseup),e.addEventListener("mousemove",this.mousemove)}static mousedown(e){a.mouseUpOrDown(e,a.mousedownListeners)}static mouseup(e){a.mouseUpOrDown(e,a.mouseupListeners)}static mousemove(e){a.mousePos=new s.Vector2(e.layerX,e.layerY)}static mouseUpOrDown(e,t){let i=this.getAbsoluteClickPosition(e);for(let e=0;e<t.length;e++){let s=n.GameManager.currentLevel.gameObjects.filter(e=>{let t=e.absoluteSize,s=e.absolutePosition.subtract(t.scale(.5));return i.x>=s.x&&i.y>=s.y&&i.x<=s.x+t.x&&i.y<=s.y+t.y});t[e](i,s)}}static getAbsoluteClickPosition(e){let t=n.GameManager.screenSize.clone(),i=new s.Vector2(e.layerX,e.layerY),r=n.GameManager.camera.worldspacePosition;return i.add(r).subtract(t.scale(.5))}static getWorldspaceMousePosition(){return a.mousePos.add(n.GameManager.camera.worldspacePosition).subtract(n.GameManager.screenSize.scale(.5)).scale(1/n.GameManager.unitSize)}static keys(e){return!!a._keyDowns[e]}static getKeyDown(e){a._keyDowns[a._KEYS[e.code]]=!0}static getKeyUp(e){a._keyDowns[a._KEYS[e.code]]=!1}static registerMouseDown(e,t){a.mousedownListeners.push(t.bind(e))}static registerMouseUp(e,t){a.mouseupListeners.push(t.bind(e))}}a._KEYS={Tab:o.Keys.Tab,ControlLeft:o.Keys.ControlLeft,ControlRight:o.Keys.ControlRight,AltLeft:o.Keys.AltLeft,AltRight:o.Keys.AltRight,ShiftLeft:o.Keys.ShiftLeft,ShiftRight:o.Keys.ShiftRight,Escape:o.Keys.Escape,Space:o.Keys.Space,ArrowLeft:o.Keys.ArrowLeft,ArrowUp:o.Keys.ArrowUp,ArrowRight:o.Keys.ArrowRight,ArrowDown:o.Keys.ArrowDown,Digit0:o.Keys.Key0,Digit1:o.Keys.Key1,Digit2:o.Keys.Key2,Digit3:o.Keys.Key3,Digit4:o.Keys.Key4,Digit5:o.Keys.Key5,Digit6:o.Keys.Key6,Digit7:o.Keys.Key7,Digit8:o.Keys.Key8,Digit9:o.Keys.Key9,KeyA:o.Keys.KeyA,KeyB:o.Keys.KeyB,KeyC:o.Keys.KeyC,KeyD:o.Keys.KeyD,KeyE:o.Keys.KeyE,KeyF:o.Keys.KeyF,KeyG:o.Keys.KeyG,KeyH:o.Keys.KeyH,KeyI:o.Keys.KeyI,KeyJ:o.Keys.KeyJ,KeyK:o.Keys.KeyK,KeyL:o.Keys.KeyL,KeyM:o.Keys.KeyM,KeyN:o.Keys.KeyN,KeyO:o.Keys.KeyO,KeyP:o.Keys.KeyP,KeyQ:o.Keys.KeyQ,KeyR:o.Keys.KeyR,KeyS:o.Keys.KeyS,KeyT:o.Keys.KeyT,KeyU:o.Keys.KeyU,KeyV:o.Keys.KeyV,KeyW:o.Keys.KeyW,KeyX:o.Keys.KeyX,KeyY:o.Keys.KeyY,KeyZ:o.Keys.KeyZ,F1:o.Keys.F1,F2:o.Keys.F2,F3:o.Keys.F3,F4:o.Keys.F4,F5:o.Keys.F5,F6:o.Keys.F6,F7:o.Keys.F7,F8:o.Keys.F8,F9:o.Keys.F9,F10:o.Keys.F10,F11:o.Keys.F11,F12:o.Keys.F12,Backquote:o.Keys.Backquote,Slash:o.Keys.Slash,Period:o.Keys.Period,Comma:o.Keys.Comma,Quote:o.Keys.Quote,Semicolon:o.Keys.Semicolon,BracketRight:o.Keys.BracketRight,BracketLeft:o.Keys.BracketLeft,Backslash:o.Keys.Backslash,Backspace:o.Keys.Backspace,Equals:o.Keys.Equals,Minus:o.Keys.Minus},a._keyDowns={},a.mousedownListeners=[],a.mouseupListeners=[],a.mousePos=s.Vector2.zero,t.Input=a},function(e,t,i){"use strict";Object.defineProperty(t,"__esModule",{value:!0});const s=i(3);t.Transform=class{constructor(e={}){this.position=e.position||new s.Vector2(0,0),this.size=e.size||new s.Vector2(1,1),this.rotation=e.rotation||0}}},function(e,t,i){"use strict";Object.defineProperty(t,"__esModule",{value:!0});t.Collider=class{constructor(e){this.allowPassThroughWhitelist=null,this.position=e.position.clone(),(e.allowPassThroughWhitelist||[]).length&&(this.allowPassThroughWhitelist=e.allowPassThroughWhitelist)}}},function(e,t,i){"use strict";Object.defineProperty(t,"__esModule",{value:!0});const s=i(2),r=i(4),n=i(20),o=i(7);class a{static trackValue(e){let t=this.trackedValues.find(t=>t.label==e.label);null==t?this.trackedValues.push(e):t.value=e.value}static untrackValue(e){for(let t=this.trackedValues.length-1;t>=0;t--){this.trackedValues[t].label==e.label&&this.trackedValues.splice(t,1)}}static trackGameObject(e){this.trackedGameObjects.push(e)}static untrackGameObject(e){for(let t=this.trackedGameObjects.length-1;t>=0;t--)this.trackedGameObjects[t]==e&&this.trackedGameObjects.splice(t,1)}static reset(){this.trackedGameObjects=[],this.timeOfLastDisplayUpdate=0}static start(e){this.style=document.createElement("style"),this.style.type="text/css",this.style.innerHTML="\n\t\t\t.debug-sub-header {\n\t\t\t\ttext-decoration: underline;\n\t\t\t}\n\t\t\t#game-debug {\n\t\t\t\tpadding: 3px;\n\t\t\t\tfont-family: Courier;\n\t\t\t\tmax-width: 600px;\n\t\t\t\toverflow-x: scroll;\n\t\t\t\tcolor: inherit !important;\n\t\t\t}\n\t\t\t#table-debug {\n\t\t\t\tcolor: inherit !important;\n\t\t\t}\n\t\t\t#table-debug td {\n\t\t\t\tvertical-align: top;\n\t\t\t\twhitespace: no-wrap;\n\t\t\t}\n\t\t\t#table-debug td {\n\t\t\t\tvertical-align: top;\n\t\t\t\twhitespace: no-wrap;\n\t\t\t\tpadding-top: 1px;\n\t\t\t\tpadding-bottom: 1px;\n\t\t\t\twhite-space: pre-wrap;\n\t\t\t}\n\t\t\t#table-debug td:nth-child(1) {\n\t\t\t\tfont-weight: bold;\n\t\t\t}\n\t\t",document.getElementsByTagName("head")[0].appendChild(this.style),this.debugDom.div_outer=document.createElement("div"),this.debugDom.div_outer.id="game-debug";let t=document.getElementById(e.parentElementID);this.debugWindowParentElement=t||document.body,this.debugWindowParentElement.appendChild(this.debugDom.div_outer),this.debugDom.table_debug=document.createElement("table"),this.debugDom.table_debug.id="table-debug",this.debugDom.div_outer.appendChild(this.debugDom.table_debug)}static stop(){document.getElementsByTagName("head")[0].removeChild(this.style),this.debugWindowParentElement.removeChild(this.debugDom.div_outer)}static update(){if(r.Time.time>this.timeBetweenDisplayUpdates+this.timeOfLastDisplayUpdate){let e=18;this.timeOfLastDisplayUpdate=r.Time.time;let t='<tr><td colspan="2"><hr></td></tr>',i=n.Utils.fps();i>this.maxFPSSoFar&&(this.maxFPSSoFar=i);let a=i.toFixed(1),l=s.GameManager.currentLevel.gameObjects.length,c=s.GameManager.currentLevel.updatesSkipped,h=s.GameManager.camera.following(),u=((h||{}).constructor||{}).name||"";(h||{}).name&&(u+=" "+h.name);let m=s.GameManager.camera.worldspacePosition,d=Object.keys(s.GameManager.currentLevel.cachedImages).join("\n"),p="";for(let e=0;e<i/5;e++)p+="#";p=this.padEndNbsp(p,this.maxFPSSoFar/5);let b="green";i<50&&i>30?b="yellow":i<=30&&(b="red");let g=s.GameManager.collidersTotal,y=s.GameManager.collidersChecked,f="";if(this.trackedValues.length){f+=t;for(let t of this.trackedValues)f+=`\n\t\t\t\t\t<tr>\n\t\t\t\t\t\t<td>${this.padEndNbsp(t.label,e)}</td>\n\t\t\t\t\t\t<td>${t.value.toString()}</td>\n\t\t\t\t\t</tr>\n\t\t\t\t\t`}let S=`\n\t\t\t\t<tr>\n\t\t\t\t\t<td colspan="2" class="debug-sub-header">Game</td>\n\t\t\t\t</tr>\n\t\t\t\t<tr>\n\t\t\t\t\t<td>${this.padEndNbsp("FPS:",e)}</td>\n\t\t\t\t\t<td>${a} [<span style="color: ${b};">${p}</span>]</td>\n\t\t\t\t</tr>\n\t\t\t\t<tr>\n\t\t\t\t\t<td>${this.padEndNbsp("Cols MtoM:",e)}</td>\n\t\t\t\t\t<td>${g}</td>\n\t\t\t\t</tr>\n\t\t\t\t<tr>\n\t\t\t\t\t<td>${this.padEndNbsp("Cols MtoM Checked:",e)}</td>\n\t\t\t\t\t<td>${y}</td>\n\t\t\t\t</tr>\n\t\t\t\t<tr>\n\t\t\t\t\t<td>${this.padEndNbsp("Game Objects:",e)}</td>\n\t\t\t\t\t<td>${l}</td>\n\t\t\t\t</tr>\n\t\t\t\t<tr>\n\t\t\t\t\t<td>${this.padEndNbsp("Updates Skipped:",e)}</td>\n\t\t\t\t\t<td>${c}</td>\n\t\t\t\t</tr>\n\t\t\t\t${t}\n\t\t\t\t<tr>\n\t\t\t\t\t<td colspan="2" class="debug-sub-header">Camera</td>\n\t\t\t\t</tr>\n\t\t\t\t<tr>\n\t\t\t\t\t<td>${this.padEndNbsp("Position:",e)}</td>\n\t\t\t\t\t<td>${m}</td>\n\t\t\t\t</tr>\n\t\t\t\t<tr>\n\t\t\t\t\t<td>${this.padEndNbsp("Following:",e)}</td>\n\t\t\t\t\t<td>${u}</td>\n\t\t\t\t</tr>\n\t\t\t\t${t}\n\t\t\t\t<tr>\n\t\t\t\t\t<td colspan="2" class="debug-sub-header">Cached</td>\n\t\t\t\t</tr>\n\t\t\t\t<tr>\n\t\t\t\t\t<td>${this.padEndNbsp("Images:",e)}</td>\n\t\t\t\t\t<td style="white-space:pre-wrap;">${d}</td>\n\t\t\t\t</tr>\n\t\t\t\t${f}\n\t\t\t`;if(this.trackedGameObjects.length){S+=`\n\t\t\t\t\t${t}\n\t\t\t\t\t<tr>\n\t\t\t\t\t\t<td colspan="2" class="debug-sub-header">Tracked GameObjects</td>\n\t\t\t\t\t</tr>\n\t\t\t\t`;let e=17;for(let t of this.trackedGameObjects){S+=`\n\t\t\t\t\t\t<tr>\n\t\t\t\t\t\t\t<td>${t.constructor.name+(t.name?" "+t.name:"")}:</td>\n\t\t\t\t\t\t\t<td style="white-space:pre-wrap;">`,S+=this.padEndNbsp("layer",e)+`${t.layer}<br>`,S+=this.padEndNbsp("position",e)+`${t.transform.position}<br>`,S+=this.padEndNbsp("absolute position",e)+`${t.absolutePosition}<br>`,S+=this.padEndNbsp("size",e)+`${t.transform.size}<br>`,S+=this.padEndNbsp("absolute size",e)+`${t.absoluteSize}<br>`,S+=this.padEndNbsp("image",e)+`${(t.image||{}).src||""}`;let i=t.getCurrentSpritesheetAnimationInfo();if(i&&(S+="<br>"+this.padEndNbsp("anim name",e)+i.name,S+="<br>"+this.padEndNbsp("anim index",e)+i.index),t.collider)if(S+="<br>"+this.padEndNbsp("col pos",e)+t.collider.position,S+="<br>"+this.padEndNbsp("col pos rel",e)+t.colliderPosition(),t.collider instanceof o.RectCollider&&(S+="<br>"+this.padEndNbsp("col size",e)+t.collider.size,S+="<br>"+this.padEndNbsp("col size rel",e)+t.rectColliderSize()),0==t.currentCollidingObjects.length)S+="<br>"+this.padEndNbsp("collisions",e)+"[]";else{S+="<br>"+this.padEndNbsp("collisions",e)+"[";for(let i of t.currentCollidingObjects)S+="<br>"+this.padEndNbsp("",e+2)+i.constructor.name+(i.name?" "+i.name:"");S+="<br>"+this.padEndNbsp("",e)+"]"}S+="\n\t\t\t\t\t\t\t</td>\n\t\t\t\t\t\t</tr>\n\t\t\t\t\t"}}this.debugDom.table_debug.innerHTML=S}}static padEndNbsp(e,t){return this.padEnd(e,t,"&nbsp;")}static padEnd(e,t,i){for(let s=e.length;s<t+1;s++)e+=i;return e}}a.trackedValues=[],a.maxFPSSoFar=0,a.debugDom={},a.timeBetweenDisplayUpdates=100,a.timeOfLastDisplayUpdate=0,a.style=null,a.trackedGameObjects=[],a.debugWindowParentElement=null,t.Debug=a},function(e,t,i){"use strict";Object.defineProperty(t,"__esModule",{value:!0});const s=i(4);t.Utils=class{static isFunction(e){return e&&"[object Function]"==={}.toString.call(e)}static fps(){return 1e3/s.Time.deltaTime}}},function(e,t,i){"use strict";Object.defineProperty(t,"__esModule",{value:!0});const s=i(0),r=i(1),n=i(13);class o extends s.GameObject{constructor(){super({layer:2}),this.maxVelocity=new s.Vector2(.2,.2),this.velocity=s.Vector2.zero,this.velocityChange=.0055,this.startPosition=new s.Vector2(2,13),this.allowedToJump=!0,this.jumping=!1,this.skidding=!1,this.currentAnimationName=null,this.minJumpPressDuration=200,this.jumpStartTime=0,this.pressedSpace=!1,this.velocityAtJumpTime=0,this.bumpedTop=!1,this.buttons={A:!1,B:!1,Left:!1,Right:!1,Up:!1,Down:!1};let e=new s.Vector2(17,16);this.currentAnimationName="idle",this.spritesheetAnimationSet=new s.SpritesheetAnimationSet({spritesheetAnimations:{smallIdle:new s.SpritesheetAnimation({imageSrc:"Images/SpriteSheet.png",transforms:[new s.Transform({position:new s.Vector2(216,398),size:e})],msPerFrame:1e4}),smallJump:new s.SpritesheetAnimation({imageSrc:"Images/SpriteSheet.png",transforms:[new s.Transform({position:new s.Vector2(366,398),size:e})],msPerFrame:1e4}),smallRun:new s.SpritesheetAnimation({imageSrc:"Images/SpriteSheet.png",transforms:[new s.Transform({position:new s.Vector2(246,398),size:e}),new s.Transform({position:new s.Vector2(276,398),size:e}),new s.Transform({position:new s.Vector2(306,398),size:e}),new s.Transform({position:new s.Vector2(276,398),size:e})],msPerFrame:75}),smallSkid:new s.SpritesheetAnimation({imageSrc:"Images/SpriteSheet.png",transforms:[new s.Transform({position:new s.Vector2(336,398),size:e})],msPerFrame:1e4})},startAnimationName:"smallIdle"}),this.transform.position=this.startPosition.clone(),this.setDefaultCollider()}init(){this.transform.position=this.startPosition.clone()}update(){this.detectButtons(),this.handleMovement(),this.trackValues(),this.handleSpritesheetSwapping(),this.transform.position=this.transform.position.add(this.velocity),s.Debug.trackValue({label:"player velocity",value:this.velocity.toString()}),(this.velocity.x<0&&this.transform.size.x>0||this.velocity.x>0&&this.transform.size.x<0)&&(this.transform.size.x=-this.transform.size.x),this.velocity.y+=2*this.velocityChange,this.velocity.y>=this.maxVelocity.y&&(this.velocity.y=this.maxVelocity.y),this.handleDeathDetection()}detectButtons(){this.buttons={A:s.Input.keys(s.Keys.Slash)||s.Input.keys(s.Keys.Space),B:s.Input.keys(s.Keys.Period)||s.Input.keys(s.Keys.ShiftLeft),Left:s.Input.keys(s.Keys.KeyA)||s.Input.keys(s.Keys.ArrowLeft),Right:s.Input.keys(s.Keys.KeyD)||s.Input.keys(s.Keys.ArrowRight),Up:s.Input.keys(s.Keys.KeyW)||s.Input.keys(s.Keys.ArrowUp),Down:s.Input.keys(s.Keys.KeyS)||s.Input.keys(s.Keys.ArrowDown)}}handleMovement(){this.buttons.A&&(this.allowedToJump&&!this.pressedSpace&&(this.pressedSpace=!0,this.jumpStartTime=s.Time.time,this.velocityAtJumpTime=Math.abs(this.velocity.x),this.velocity.y=-this.maxVelocity.y),!this.bumpedTop&&this.getMaxJumpTime()>s.Time.time&&(this.velocity.y=-this.maxVelocity.y,this.jumping=!0)),this.buttons.A||(this.pressedSpace=!1),(this.jumping||this.velocity.y>.125)&&(this.allowedToJump=!1,this.jumping=!0,this.setAnimation("jump"));let e=this.buttons.Left||this.buttons.Right?this.velocityChange:0;this.buttons.Left&&(e*=-1),Math.abs(this.velocity.x)>.45*this.maxVelocity.x&&(e*=this.buttons.B?2:1),this.velocity.x+=e;let t=this.buttons.B?this.maxVelocity.x:.75*this.maxVelocity.x;this.velocity.x<-t&&(this.velocity.x=-t),this.velocity.x>t&&(this.velocity.x=t),this.buttons.Right?this.velocity.x<0?(this.velocity.x+=this.velocityChange*(this.buttons.B?1:.5),this.skidding=!0):this.skidding=!1:this.buttons.Left?this.velocity.x>0?(this.velocity.x-=this.velocityChange*(this.buttons.B?2:1),this.skidding=!0):this.skidding=!1:(this.velocity.x<0?this.velocity.x+=2*this.velocityChange:this.velocity.x>0&&(this.velocity.x-=2*this.velocityChange),Math.abs(this.velocity.x)<2*this.velocityChange&&(this.velocity.x=0))}getMaxJumpTime(){return this.jumpStartTime+this.minJumpPressDuration+500*this.velocityAtJumpTime}handleDeathDetection(){this.transform.position.y>17.5&&(this.transform.position=this.startPosition.clone(),this.die())}handleSpritesheetSwapping(){this.jumping?"jump"!=this.currentAnimationName&&this.setAnimation("jump"):0==this.velocity.x?this.setAnimation("idle"):this.skidding?this.setAnimation("skid"):this.setAnimation("run")}setAnimation(e){this.currentAnimationName=e;let t={jump:"smallJump",run:"smallRun",idle:"smallIdle",skid:"smallSkid"}[e];this.spritesheetAnimationSet.currentAnimationName!=t&&(this.spritesheetAnimationSet.currentAnimationName=t)}onNoPassthroughTouch(e,t){e instanceof r.Tile&&("right"!=t&&"left"!=t||(this.velocity.x=0),"bottom"==t&&(this.jumping=!1,this.allowedToJump=!0,this.velocity.y=0,this.bumpedTop=!1),"top"==t&&(this.velocity.y=0,this.allowedToJump=!1,this.bumpedTop=!0,e.onHitFromBeneath()))}die(){n.Data.lives-=1,n.Data.hud.lives.text="Lives "+n.Data.lives.toString(),s.GameManager.currentLevel.managingGameObject.buildLevel()}trackValues(){}}t.Player=o},function(e,t,i){"use strict";Object.defineProperty(t,"__esModule",{value:!0});const s=i(0),r=i(1);class n extends s.GameObject{constructor(){super(),this.collider=new s.RectCollider({position:new s.Vector2(-8.35,0),size:new s.Vector2(1,20),allowPassThroughWhitelist:[r.Tile]}),this.init()}init(){this.transform.position.y=9,this.transform.position.x=7.5,s.GameManager.camera.follow(this)}update(){let e=s.GameManager.currentLevel.managingGameObject.player;e.transform.position.x>this.transform.position.x&&(this.transform.position.x=e.transform.position.x),this.currentCollidingObjects.indexOf(e)>=0&&(e.transform.position.x=this.transform.position.x-7.35,e.velocity.x=0)}}t.BackBarrier=n},function(e,t,i){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var s=i(66);t.MainLevel=s.MainLevel;var r=i(67);t.MainLevelController=r.MainLevelController},function(e,t,i){"use strict";Object.defineProperty(t,"__esModule",{value:!0});const s=i(25),r=i(39),n=i(65),o=i(73);"zelda"==gameType?window.addEventListener("load",s.zeldaGameLauncher,!1):"mario"==gameType?window.addEventListener("load",r.marioGameLauncher,!1):"frogger"==gameType?window.addEventListener("load",n.froggerGameLauncher,!1):"tetris"==gameType&&window.addEventListener("load",o.tetrisGameLauncher,!1)},function(e,t,i){"use strict";Object.defineProperty(t,"__esModule",{value:!0});const s=i(0),r=i(32);t.zeldaGameLauncher=function(){new s.GameLauncher({parentElementID:"game-holder",screenWidth:800,screenHeight:750,imageAntiAliasing:!1,layers:4,showDebug:!0,backgroundColor:"#001100",border:"1px solid #008800",allowToggleDebug:!0,drawColliders:!0,drawTransforms:!0,drawCenteredCross:!0,levelClasses:{Overworld:r.OverworldLevel},initialLevel:"Overworld"})}},function(e,t,i){"use strict";Object.defineProperty(t,"__esModule",{value:!0});const s=i(2);t.GameLauncher=class{constructor(e={}){s.GameManager.start(e)}}},function(e,t,i){"use strict";Object.defineProperty(t,"__esModule",{value:!0});const s=i(2),r=i(6);t.Level=class{constructor(e){this.gameObjects=[],this._cachedImages={},this.imageSrcs=[],this.managingGameObject=null,this.updatesSkipped=0,this.extraViewportPadding=null,this.unitSize=50,this.hudUnitSize=50,this.backgroundColor="#000000";for(let t in e)this[t]=e[t];for(let e of this.imageSrcs){let t=new Image;t.src=e,this._cachedImages[e]&&(console.warn("Duplicate image source:"),console.warn("- Class:  "+this.constructor.name),console.warn("- Source: "+e)),this._cachedImages[e]=t}}init(){this.managingGameObject=new this.managingGameObjectClass,this.managingGameObject.neverSkipUpdate=!0}get cachedImages(){return this._cachedImages}update(){let e=s.GameManager.camera;this.updatesSkipped=0;for(let t of this.gameObjects)t.inViewOfCamera=e.inViewOfGameObject(t,this.extraViewportPadding),t.neverSkipUpdate||t.inViewOfCamera?t.update():this.updatesSkipped++}draw(){let e=[],t=[],i=[];for(let e of this.gameObjects)e instanceof r.HudGameObject?i.push(e):t.push(e);for(let r of[t,i])for(let t=0;t<s.GameManager.options.layers;t++)for(let i=0;i<r.length;i++){let s=r[i];s.inViewOfCamera?s.getLayer()==t&&(e.push(s),s.draw()):e.push(s)}if(e.length<this.gameObjects.length)for(let t of this.gameObjects)-1==e.indexOf(t)&&console.warn(t.constructor.name+" GameObject was not drawn, did you set its layers properly?")}updateAnimations(){for(let e of this.gameObjects)e.updateAnimations()}registerGameObject(e){this.gameObjects.push(e)}}},function(e,t,i){"use strict";Object.defineProperty(t,"__esModule",{value:!0});const s=i(4);t.SpritesheetAnimation=class{constructor(e){this.transforms=[],this.msPerFrame=100,this.msSinceLastIndexChange=0,this.imageSrc=e.imageSrc,this.transforms=e.transforms,this.msPerFrame=e.msPerFrame||100,this.index=e.startIndex||0,this.loop=void 0===e.loop||e.loop}update(){this.msSinceLastIndexChange+=s.Time.deltaTime,this.msSinceLastIndexChange>=this.msPerFrame&&(this.msSinceLastIndexChange-=this.msPerFrame,this.index++,this.index>=this.transforms.length&&(this.index=this.loop?0:this.transforms.length-1))}}},function(e,t,i){"use strict";Object.defineProperty(t,"__esModule",{value:!0});t.SpritesheetAnimationSet=class{constructor(e){this._currentAnimationName=null,this.spritesheetAnimations={},this.spritesheetAnimations=e.spritesheetAnimations,this._currentAnimationName=e.startAnimationName}get currentAnimationName(){return this._currentAnimationName}set currentAnimationName(e){this._currentAnimationName=e,this.spritesheetAnimations[this._currentAnimationName].index=0}get imageSrc(){return this.spritesheetAnimations[this._currentAnimationName].imageSrc}get currentAnimationTransform(){let e=this.spritesheetAnimations[this._currentAnimationName];return e.transforms[e.index]}update(){this._currentAnimationName&&this.spritesheetAnimations[this._currentAnimationName].update()}}},function(e,t,i){"use strict";Object.defineProperty(t,"__esModule",{value:!0});const s=i(3),r=i(9),n=i(2),o=i(4);class a extends r.GameObject{constructor(e=null){if(super({imageSrc:e}),this.speedX=(1+Math.random())/10,this.speedY=(1+Math.random())/10,this.useImage=!1,this.shapeFillStyle="#",this.shape="rectangle",e)this.imageSrc=e,this.transform.size=new s.Vector2(13,18).scale(1+3*Math.random());else{this.transform.size=new s.Vector2(1,1).scale(3+3*Math.random());let e="0123456789abcdef";for(let t=0;t<6;t++){let t=Math.floor(16*Math.random());this.shapeFillStyle+=e.charAt(t)}}}update(){let e=n.GameManager.options,t=this.transform.position,i=this.transform.size;t.x+=this.speedX*o.Time.deltaTime,t.y+=this.speedY*o.Time.deltaTime,t.x<0&&(this.speedX*=-1,t.x=0),t.y<0&&(this.speedY*=-1,t.y=0),t.x>e.screenWidth-i.x&&(this.speedX*=-1,t.x=e.screenWidth-i.x),t.y>e.screenHeight-i.y&&(this.speedY*=-1,t.y=e.screenHeight-i.y)}}t.StressTestSquare=a},function(e,t,i){"use strict";Object.defineProperty(t,"__esModule",{value:!0});class s{constructor(...e){if(console.warn("Experimental class: better know what you're doing"),!e.length)throw"Failed: message from VectorN";this.values=e}clone(){return new s(...this.values)}add(e){let t=this.clone();if(e.values.length!=this.values.length)throw"different dimensions";return t.values=e.values.map((e,t)=>this.values[t]+e),t}subtract(e){let t=this.clone();if(e.values.length!=this.values.length)throw"different dimensions";return t.values=e.values.map((e,t)=>this.values[t]-e),t}scaleBy(e){let t=this.clone();return t.values=this.values.map(t=>t*e),t}moveTowards(e,t){t=Math.min(t,1);var i=e.subtract(this);return this.add(i.scale(t))}magSqr(){return this.values.map(e=>Math.pow(e,2)).reduce((e,t)=>e+t)}magnitude(){return Math.sqrt(this.magSqr())}distanceSqr(e){return e.values.map((e,t)=>Math.pow(this.values[t]-e,2)).reduce((e,t)=>e+t)}distance(e){return Math.sqrt(this.distanceSqr(e))}normalize(){let e=this.clone();const t=this.magnitude();return Math.abs(t)<1e-9?e.values=Array(this.values.length).fill(0):e.values=this.values.map(e=>e/=t),e}dotProduct(e){return this.values.map((e,t)=>this.values[t]*e).reduce((e,t)=>e+t)}equals(e){return this.values.toString()==e.values.toString()}}t.VectorN=s},function(e,t,i){"use strict";Object.defineProperty(t,"__esModule",{value:!0});const s=i(33),r=i(0);class n extends r.Level{constructor(){super({managingGameObjectClass:s.OverworldController,imageSrcs:["Images/Link.png","Images/Overworld.png","Images/SoldierBlue.png","Images/SoldierGreenWalkDownSpritesheet.png","Images/SoldierGreenWalkSideSpritesheet.png"],extraViewportPadding:new r.Vector2(r.GameManager.options.screenWidth,r.GameManager.options.screenHeight).scale(.5)})}}t.OverworldLevel=n},function(e,t,i){"use strict";Object.defineProperty(t,"__esModule",{value:!0});const s=i(0),r=i(0),n=i(11);class o extends s.GameObject{constructor(){super({layer:0}),this.player=null,this.background=null,this.enemies=[];let e=new r.Vector2(60,60);this.background=new n.OverworldBackground(e),s.Debug.trackGameObject(this.background),this.player=new n.Player(e),this.player.transform.position=this.background.transform.position.clone(),s.Debug.trackGameObject(this.player),s.GameManager.camera.worldspacePosition=this.player.transform.position,s.GameManager.camera.follow(this.player);for(let t=0;t<50;t++)this.enemies.push(new n.SoldierGreen(e)),this.enemies.push(new n.SoldierBlue(e)),this.enemies.push(new n.SoldierBlue(e)),this.enemies.push(new n.SoldierBlue(e))}update(){s.Input.keys(s.Keys.Key1)&&s.GameManager.unitSize>5&&(s.GameManager.currentLevel.unitSize-=.5),s.Input.keys(s.Keys.Key2)&&s.GameManager.unitSize<500&&(s.GameManager.currentLevel.unitSize+=.5)}}t.OverworldController=o},function(e,t,i){"use strict";Object.defineProperty(t,"__esModule",{value:!0});const s=i(0);class r extends s.GameObject{constructor(e){super({layer:0,imageSrc:"Images/Overworld.png"}),this.transform.size=e.clone(),this.transform.position=e.scale(.5)}}t.OverworldBackground=r},function(e,t,i){"use strict";Object.defineProperty(t,"__esModule",{value:!0});const s=i(0);class r extends s.GameObject{constructor(e){super({layer:2,imageSrc:"Images/Link.png",name:"player"}),this.speed=.1,this.boundarySize=null,this.holdingMouse=!1,this.boundarySize=e,this.transform.size=new s.Vector2(.75,1),this.setDefaultCollider(),s.Input.registerMouseDown(this,this.mousedown),s.Input.registerMouseUp(this,this.mouseup)}update(){this.handleMovement(),this.holdingMouse,s.Input.keys(s.Keys.Space)&&console.log("keys.space")}handleMovement(){let e=this.transform.position;s.Input.keys(s.Keys.ArrowLeft)&&(e.x-=this.speed),s.Input.keys(s.Keys.ArrowRight)&&(e.x+=this.speed),s.Input.keys(s.Keys.ArrowUp)&&(e.y-=this.speed),s.Input.keys(s.Keys.ArrowDown)&&(e.y+=this.speed),this.transform.position.x<0&&(this.transform.position.x=0),this.transform.position.y<0&&(this.transform.position.y=0),this.transform.position.x>this.boundarySize.x&&(this.transform.position.x=this.boundarySize.x),this.transform.position.y>this.boundarySize.y&&(this.transform.position.y=this.boundarySize.y)}mousedown(e,t){for(let e of t)e==this&&(this.holdingMouse=!0)}mouseup(e,t){this.holdingMouse=!1}onCollisionEnter(e){}}t.Player=r},function(e,t,i){"use strict";Object.defineProperty(t,"__esModule",{value:!0});const s=i(0);class r extends s.GameObject{constructor(){super({layer:1}),this.speedX=0,this.speedY=0,this.dr=Math.random()/10}init(){this.setRandomDirection(),this.transform.size=new s.Vector2(.75,1).scale(1+Math.random()),this.transform.position=new s.Vector2(Math.random()*(this.boundarySize.x-this.transform.size.x),Math.random()*(this.boundarySize.y-this.transform.size.y)),this.setDefaultCollider()}update(){this.handleMovement(),this.transform.rotation+=this.dr}setRandomDirection(){this.speedX=(-.5+Math.random())/500,this.speedY=(-.5+Math.random())/500}handleMovement(){let e=this.transform.position,t=this.transform.size;e.x+=this.speedX*s.Time.deltaTime,e.y+=this.speedY*s.Time.deltaTime,e.x<0&&(this.speedX*=-1,e.x=0),e.y<0&&(this.speedY*=-1,e.y=0),this.boundarySize&&(e.x>this.boundarySize.x-t.x&&(this.speedX*=-1,e.x=this.boundarySize.x-t.x),e.y>this.boundarySize.y-t.y&&(this.speedY*=-1,e.y=this.boundarySize.y-t.y))}}t.Soldier=r},function(e,t,i){"use strict";Object.defineProperty(t,"__esModule",{value:!0});const s=i(0),r=i(11);class n extends r.Soldier{constructor(e){super(),this.imageSrc="Images/SoldierBlue.png",this.boundarySize=e.clone(),s.Input.registerMouseDown(this,this.mousedown),this.init()}mousedown(e,t){for(let e of t)e==this&&this.setRandomDirection()}}t.SoldierBlue=n},function(e,t,i){"use strict";Object.defineProperty(t,"__esModule",{value:!0});const s=i(0),r=i(11);class n extends r.Soldier{constructor(e){super(),this.currentAnimationName=null,this.holdingMouse=!1,this.boundarySize=e.clone(),this.currentAnimationName="walkDown",this.spritesheetAnimationSet=new s.SpritesheetAnimationSet({spritesheetAnimations:{walkDown:new s.SpritesheetAnimation({imageSrc:"Images/SoldierGreenWalkDownSpritesheet.png",transforms:[new s.Transform({position:new s.Vector2(0,0),size:new s.Vector2(22,38)}),new s.Transform({position:new s.Vector2(0,38),size:new s.Vector2(22,38)}),new s.Transform({position:new s.Vector2(0,76),size:new s.Vector2(22,38)}),new s.Transform({position:new s.Vector2(0,114),size:new s.Vector2(22,38)})],msPerFrame:200}),walkSide:new s.SpritesheetAnimation({imageSrc:"Images/SoldierGreenWalkSideSpritesheet.png",transforms:[new s.Transform({position:new s.Vector2(0,0),size:new s.Vector2(31,27)}),new s.Transform({position:new s.Vector2(0,27),size:new s.Vector2(31,27)}),new s.Transform({position:new s.Vector2(0,54),size:new s.Vector2(31,27)})],msPerFrame:200})},startAnimationName:this.currentAnimationName}),s.Input.registerMouseDown(this,this.mousedown),s.Input.registerMouseUp(this,this.mouseup),this.init()}update(){Math.random()<.01&&("walkDown"==this.currentAnimationName?this.currentAnimationName="walkSide":this.currentAnimationName="walkDown",this.spritesheetAnimationSet.currentAnimationName=this.currentAnimationName),this.handleMovement(),this.holdingMouse?(this.speedX=0,this.speedY=0,this.transform.position=s.Input.getWorldspaceMousePosition()):0==this.speedX&&this.setRandomDirection(),this.transform.rotation+=this.dr}mousedown(e,t){for(let e of t)e==this&&(this.holdingMouse=!0)}mouseup(e,t){this.holdingMouse=!1}onCollisionEnter(e){if(e.constructor==r.SoldierBlue)return void s.GameManager.destroy(e);Math.abs(this.transform.position.x-e.transform.position.x+e.transform.size.x)>Math.abs(this.transform.position.y-e.transform.position.y+e.transform.size.y)?this.speedY*=-1:this.speedX*=-1}}t.SoldierGreen=n},function(e,t,i){"use strict";Object.defineProperty(t,"__esModule",{value:!0});const s=i(0),r=i(12);t.marioGameLauncher=function(){new s.GameLauncher({parentElementID:"game-holder",screenWidth:800,screenHeight:600,imageAntiAliasing:!1,layers:5,showDebug:!0,backgroundColor:"#000011",border:"1px solid #000088",allowToggleDebug:!0,font:"Courier New",levelClasses:{Level01:r.Level01}})}},function(e,t,i){"use strict";Object.defineProperty(t,"__esModule",{value:!0});const s=i(0),r=i(1),n=i(21),o=i(13),a=i(22);class l extends s.GameObject{constructor(e){super({layer:0}),this.tileFlags=[["rb","rb"],["rb","rb"],["rb","rb"],["rb","rb"],["rb","rb"],["rb","rb","hlg","","","?"],["rb","rb","hcslg","htg"],["rb","rb","hrg"],["rb","rb","","","","","","","","cbl","ctl"],["rb","rb","","","","btb","","","","cb","ct"],["rb","rb","","","","?","","","","cbr","ctr"],["rb","rb","","","","btb","","","?"],["rb","rb","","","","?"],["rb","rb","","","","btb"],["rb","rb"],["rb","rb"],["rb","rb"],["rb","rb","tbl","ttl"],["rb","rb","tbr","ttr"],["rb","rb"],["rb","rb"],["rb","rb"]],this.flagMap={"":null,"?":r.TileQuestionMark,bb:r.TileBricksBrown,btb:r.TileBricksTopBrown,cbl:r.TileCloudBottomLeft,cb:r.TileCloudBottom,cbr:r.TileCloudBottomRight,ctl:r.TileCloudTopLeft,ct:r.TileCloudTop,ctr:r.TileCloudTopRight,hcg:r.TileHillCenterGreen,hcslg:r.TileHillCenterSpotsLeftGreen,hcsrg:r.TileHillCenterSpotsRightGreen,hlg:r.TileHillLeftGreen,hrg:r.TileHillRightGreen,htg:r.TileHillTopGreen,rb:r.TileRocksBrown,tbl:r.TileTubeBottomLeft,tbr:r.TileTubeBottomRight,ttl:r.TileTubeTopLeft,ttr:r.TileTubeTopRight},this.tiles=[],e.tileFlags?this.tileFlags=e.tileFlags:console.warn("Warning: Using default level tiles.  You need to pass tileFlags into the MarioLevel super() call"),this.backBarrier=new a.BackBarrier,this.player=new n.Player,s.Debug.trackGameObject(this.player),this.buildLevel()}destroyTile(e){let t=this.getIndexOfTile(e);t.equals(new s.Vector2(-1,-1))||(s.GameManager.destroy(e),this.tiles[t.x][t.y]=null)}getIndexOfTile(e){let t=new s.Vector2(-1,-1);for(let i=0;i<this.tiles.length;i++){let s=this.tiles[i];for(let r=0;r<s.length;r++)s[r]==e&&(t.x=i,t.y=r)}return t}replaceTile(e,t){let i=new t;if(i instanceof r.Tile){let t=this.getIndexOfTile(e);i.transform.position=e.transform.position.clone(),this.destroyTile(e),this.tiles[t.x][t.y]=i}}buildLevel(){this.backBarrier.init(),this.player.init(),this.buildHud();for(let e=0;e<this.tileFlags.length;e++){this.tiles[e]||(this.tiles[e]=[]);let t=this.tiles[e],i=this.tileFlags[e];for(let s=0;s<i.length;s++){let r=i[s],n=this.flagMap[r];if(null===n&&null!==t[s])t[s]=null;else if(void 0===n)console.warn("Flag '"+r+"' does not match a known tile type.");else if(t[s]||null===n)!t[s]||!n||t[s]instanceof n||this.replaceTile(t[s],n);else{let t=new n;this.positionTile(t,e,s),this.tiles[e][s]=t}}}}buildHud(){let e=new s.Vector2(5,1);o.Data.hud||(o.Data.hud={panel:new s.HudGameObject({gameObjectParams:{shape:"rectangle",shapeFillStyle:"rgba(0, 0, 0, 0.2)",transform:new s.Transform({position:new s.Vector2(0,-11.5),size:new s.Vector2(s.GameManager.screenSize.x/s.GameManager.hudUnitSize,2)})}}),score:new s.HudGameObject({gameObjectParams:{textColor:"#FFFFFF",text:o.Data.score.toString(),textBold:!0,transform:new s.Transform({position:new s.Vector2(-13,-11),size:e})}}),lives:new s.HudGameObject({gameObjectParams:{textColor:"#FFFFFF",text:"Lives "+o.Data.lives.toString(),textBold:!0,transform:new s.Transform({position:new s.Vector2(-7,-11),size:e})}}),coins:new s.HudGameObject({gameObjectParams:{textColor:"#FFFFFF",text:"Coins "+o.Data.coins.toString(),textBold:!0,transform:new s.Transform({position:new s.Vector2(-1,-11),size:e})}}),level:new s.HudGameObject({gameObjectParams:{textColor:"#FFFFFF",text:"Level "+o.Data.world.toString()+"-"+o.Data.level.toString(),textBold:!0,transform:new s.Transform({position:new s.Vector2(6,-11),size:e})}}),time:new s.HudGameObject({gameObjectParams:{textColor:"#FFFFFF",text:"Time "+o.Data.time.toString(),textBold:!0,transform:new s.Transform({position:new s.Vector2(13,-11),size:e})}})})}positionTile(e,t,i){e.transform.position.x=t,e.transform.position.y=15-i}handleCameraZoom(){s.Input.keys(s.Keys.Key1)&&s.GameManager.unitSize>5&&(s.GameManager.currentLevel.unitSize-=.5),s.Input.keys(s.Keys.Key2)&&s.GameManager.unitSize<500&&(s.GameManager.currentLevel.unitSize+=.5)}}t.LevelController=l},function(e,t,i){"use strict";Object.defineProperty(t,"__esModule",{value:!0});const s=i(0),r=i(21),n=i(22);class o extends s.GameObject{constructor(e){super({layer:1}),this.setDefaultCollider(),e.hasCollider&&(this.collider.allowPassThroughWhitelist=[n.BackBarrier],e.allowPassThrough&&this.collider.allowPassThroughWhitelist.push(r.Player),this.breakFromBeneath=e.breakFromBeneath),this.spritesheetAnimationSet=e.spritesheetAnimationSet,s.Input.registerMouseDown(this,this.mousedown)}mousedown(e,t){for(let e of t)if(e==this){s.GameManager.currentLevel.managingGameObject.destroyTile(this)}}onHitFromBeneath(){let e=s.GameManager.currentLevel.managingGameObject;this.breakFromBeneath&&e.destroyTile(this)}}t.Tile=o,o.spriteSheet="Images/SpriteSheetTiles.png",o.spriteSize=new s.Vector2(16,16)},function(e,t,i){"use strict";Object.defineProperty(t,"__esModule",{value:!0});const s=i(0),r=i(1);class n extends r.Tile{constructor(){super({hasCollider:!0,allowPassThrough:!1,breakFromBeneath:!0,spritesheetAnimationSet:new s.SpritesheetAnimationSet({spritesheetAnimations:{idle:new s.SpritesheetAnimation({imageSrc:r.Tile.spriteSheet,transforms:[new s.Transform({position:new s.Vector2(2*r.Tile.spriteSize.x,0),size:r.Tile.spriteSize})],msPerFrame:1e4,loop:!1})},startAnimationName:"idle"})})}}t.TileBricksBrown=n},function(e,t,i){"use strict";Object.defineProperty(t,"__esModule",{value:!0});const s=i(1),r=i(0);class n extends s.Tile{constructor(){super({hasCollider:!0,allowPassThrough:!1,breakFromBeneath:!0,spritesheetAnimationSet:new r.SpritesheetAnimationSet({spritesheetAnimations:{idle:new r.SpritesheetAnimation({imageSrc:s.Tile.spriteSheet,transforms:[new r.Transform({position:new r.Vector2(s.Tile.spriteSize.x,0),size:s.Tile.spriteSize})],msPerFrame:1e4,loop:!1})},startAnimationName:"idle"})})}}t.TileBricksTopBrown=n},function(e,t,i){"use strict";Object.defineProperty(t,"__esModule",{value:!0});const s=i(1),r=i(0);class n extends s.Tile{constructor(){super({hasCollider:!1,allowPassThrough:!0,breakFromBeneath:!1,spritesheetAnimationSet:new r.SpritesheetAnimationSet({spritesheetAnimations:{idle:new r.SpritesheetAnimation({imageSrc:s.Tile.spriteSheet,transforms:[new r.Transform({position:new r.Vector2(1*s.Tile.spriteSize.x,21*s.Tile.spriteSize.y),size:s.Tile.spriteSize})],msPerFrame:1e4,loop:!1})},startAnimationName:"idle"})})}}t.TileCloudBottom=n},function(e,t,i){"use strict";Object.defineProperty(t,"__esModule",{value:!0});const s=i(1),r=i(0);class n extends s.Tile{constructor(){super({hasCollider:!1,allowPassThrough:!0,breakFromBeneath:!1,spritesheetAnimationSet:new r.SpritesheetAnimationSet({spritesheetAnimations:{idle:new r.SpritesheetAnimation({imageSrc:s.Tile.spriteSheet,transforms:[new r.Transform({position:new r.Vector2(0*s.Tile.spriteSize.x,21*s.Tile.spriteSize.y),size:s.Tile.spriteSize})],msPerFrame:1e4,loop:!1})},startAnimationName:"idle"})})}}t.TileCloudBottomLeft=n},function(e,t,i){"use strict";Object.defineProperty(t,"__esModule",{value:!0});const s=i(1),r=i(0);class n extends s.Tile{constructor(){super({hasCollider:!1,allowPassThrough:!0,breakFromBeneath:!1,spritesheetAnimationSet:new r.SpritesheetAnimationSet({spritesheetAnimations:{idle:new r.SpritesheetAnimation({imageSrc:s.Tile.spriteSheet,transforms:[new r.Transform({position:new r.Vector2(2*s.Tile.spriteSize.x,21*s.Tile.spriteSize.y),size:s.Tile.spriteSize})],msPerFrame:1e4,loop:!1})},startAnimationName:"idle"})})}}t.TileCloudBottomRight=n},function(e,t,i){"use strict";Object.defineProperty(t,"__esModule",{value:!0});const s=i(1),r=i(0);class n extends s.Tile{constructor(){super({hasCollider:!1,allowPassThrough:!0,breakFromBeneath:!1,spritesheetAnimationSet:new r.SpritesheetAnimationSet({spritesheetAnimations:{idle:new r.SpritesheetAnimation({imageSrc:s.Tile.spriteSheet,transforms:[new r.Transform({position:new r.Vector2(1*s.Tile.spriteSize.x,20*s.Tile.spriteSize.y),size:s.Tile.spriteSize})],msPerFrame:1e4,loop:!1})},startAnimationName:"idle"})})}}t.TileCloudTop=n},function(e,t,i){"use strict";Object.defineProperty(t,"__esModule",{value:!0});const s=i(1),r=i(0);class n extends s.Tile{constructor(){super({hasCollider:!1,allowPassThrough:!0,breakFromBeneath:!1,spritesheetAnimationSet:new r.SpritesheetAnimationSet({spritesheetAnimations:{idle:new r.SpritesheetAnimation({imageSrc:s.Tile.spriteSheet,transforms:[new r.Transform({position:new r.Vector2(0*s.Tile.spriteSize.x,20*s.Tile.spriteSize.y),size:s.Tile.spriteSize})],msPerFrame:1e4,loop:!1})},startAnimationName:"idle"})})}}t.TileCloudTopLeft=n},function(e,t,i){"use strict";Object.defineProperty(t,"__esModule",{value:!0});const s=i(1),r=i(0);class n extends s.Tile{constructor(){super({hasCollider:!1,allowPassThrough:!0,breakFromBeneath:!1,spritesheetAnimationSet:new r.SpritesheetAnimationSet({spritesheetAnimations:{idle:new r.SpritesheetAnimation({imageSrc:s.Tile.spriteSheet,transforms:[new r.Transform({position:new r.Vector2(2*s.Tile.spriteSize.x,20*s.Tile.spriteSize.y),size:s.Tile.spriteSize})],msPerFrame:1e4,loop:!1})},startAnimationName:"idle"})})}}t.TileCloudTopRight=n},function(e,t,i){"use strict";Object.defineProperty(t,"__esModule",{value:!0});const s=i(1),r=i(0);class n extends s.Tile{constructor(){super({hasCollider:!1,allowPassThrough:!0,breakFromBeneath:!1,spritesheetAnimationSet:new r.SpritesheetAnimationSet({spritesheetAnimations:{idle:new r.SpritesheetAnimation({imageSrc:s.Tile.spriteSheet,transforms:[new r.Transform({position:new r.Vector2(9*s.Tile.spriteSize.x,9*s.Tile.spriteSize.y),size:s.Tile.spriteSize})],msPerFrame:1e4,loop:!1})},startAnimationName:"idle"})})}}t.TileHillCenterGreen=n},function(e,t,i){"use strict";Object.defineProperty(t,"__esModule",{value:!0});const s=i(1),r=i(0);class n extends s.Tile{constructor(){super({hasCollider:!1,allowPassThrough:!0,breakFromBeneath:!1,spritesheetAnimationSet:new r.SpritesheetAnimationSet({spritesheetAnimations:{idle:new r.SpritesheetAnimation({imageSrc:s.Tile.spriteSheet,transforms:[new r.Transform({position:new r.Vector2(8*s.Tile.spriteSize.x,9*s.Tile.spriteSize.y),size:s.Tile.spriteSize})],msPerFrame:1e4,loop:!1})},startAnimationName:"idle"})})}}t.TileHillCenterSpotsLeftGreen=n},function(e,t,i){"use strict";Object.defineProperty(t,"__esModule",{value:!0});const s=i(1),r=i(0);class n extends s.Tile{constructor(){super({hasCollider:!1,allowPassThrough:!0,breakFromBeneath:!1,spritesheetAnimationSet:new r.SpritesheetAnimationSet({spritesheetAnimations:{idle:new r.SpritesheetAnimation({imageSrc:s.Tile.spriteSheet,transforms:[new r.Transform({position:new r.Vector2(10*s.Tile.spriteSize.x,9*s.Tile.spriteSize.y),size:s.Tile.spriteSize})],msPerFrame:1e4,loop:!1})},startAnimationName:"idle"})})}}t.TileHillCenterSpotsRightGreen=n},function(e,t,i){"use strict";Object.defineProperty(t,"__esModule",{value:!0});const s=i(1),r=i(0);class n extends s.Tile{constructor(){super({hasCollider:!1,allowPassThrough:!0,breakFromBeneath:!1,spritesheetAnimationSet:new r.SpritesheetAnimationSet({spritesheetAnimations:{idle:new r.SpritesheetAnimation({imageSrc:s.Tile.spriteSheet,transforms:[new r.Transform({position:new r.Vector2(8*s.Tile.spriteSize.x,8*s.Tile.spriteSize.y),size:s.Tile.spriteSize})],msPerFrame:1e4,loop:!1})},startAnimationName:"idle"})})}}t.TileHillLeftGreen=n},function(e,t,i){"use strict";Object.defineProperty(t,"__esModule",{value:!0});const s=i(1),r=i(0);class n extends s.Tile{constructor(){super({hasCollider:!1,allowPassThrough:!0,breakFromBeneath:!1,spritesheetAnimationSet:new r.SpritesheetAnimationSet({spritesheetAnimations:{idle:new r.SpritesheetAnimation({imageSrc:s.Tile.spriteSheet,transforms:[new r.Transform({position:new r.Vector2(10*s.Tile.spriteSize.x,8*s.Tile.spriteSize.y),size:s.Tile.spriteSize})],msPerFrame:1e4,loop:!1})},startAnimationName:"idle"})})}}t.TileHillRightGreen=n},function(e,t,i){"use strict";Object.defineProperty(t,"__esModule",{value:!0});const s=i(1),r=i(0);class n extends s.Tile{constructor(){super({hasCollider:!1,allowPassThrough:!0,breakFromBeneath:!1,spritesheetAnimationSet:new r.SpritesheetAnimationSet({spritesheetAnimations:{idle:new r.SpritesheetAnimation({imageSrc:s.Tile.spriteSheet,transforms:[new r.Transform({position:new r.Vector2(9*s.Tile.spriteSize.x,8*s.Tile.spriteSize.y),size:s.Tile.spriteSize})],msPerFrame:1e4,loop:!1})},startAnimationName:"idle"})})}}t.TileHillTopGreen=n},function(e,t,i){"use strict";Object.defineProperty(t,"__esModule",{value:!0});const s=i(1),r=i(0),n=i(13);class o extends s.Tile{constructor(){super({hasCollider:!0,allowPassThrough:!1,breakFromBeneath:!1,spritesheetAnimationSet:new r.SpritesheetAnimationSet({spritesheetAnimations:{idle:new r.SpritesheetAnimation({imageSrc:s.Tile.spriteSheet,transforms:[new r.Transform({position:new r.Vector2(24*s.Tile.spriteSize.x,0),size:s.Tile.spriteSize})],msPerFrame:1e4,loop:!1}),flash:new r.SpritesheetAnimation({imageSrc:s.Tile.spriteSheet,transforms:[new r.Transform({position:new r.Vector2(25*s.Tile.spriteSize.x,0),size:s.Tile.spriteSize}),new r.Transform({position:new r.Vector2(26*s.Tile.spriteSize.x,0),size:s.Tile.spriteSize}),new r.Transform({position:new r.Vector2(24*s.Tile.spriteSize.x,0),size:s.Tile.spriteSize})],msPerFrame:200,loop:!1}),spent:new r.SpritesheetAnimation({imageSrc:s.Tile.spriteSheet,transforms:[new r.Transform({position:new r.Vector2(3*s.Tile.spriteSize.x,0),size:s.Tile.spriteSize})],msPerFrame:1e4,loop:!1})},startAnimationName:"idle"})}),this.spent=!1,this.flashing=!1,this.idleDuration=2e3,this.idleStartTime=0,this.flashDuration=400,this.flashStartTime=0,this.idleStartTime=r.Time.time}update(){this.spent||(this.flashing?this.flashStartTime+this.flashDuration<=r.Time.time&&(this.flashing=!1,this.spritesheetAnimationSet.currentAnimationName="idle",this.idleStartTime=r.Time.time):this.idleStartTime+this.idleDuration<=r.Time.time&&(this.flashing=!0,this.spritesheetAnimationSet.currentAnimationName="flash",this.flashStartTime=r.Time.time))}onHitFromBeneath(){this.spent||(this.spent=!0,n.Data.coins++,n.Data.coins>=100&&(n.Data.coins=0,n.Data.lives++,n.Data.hud.lives.text="Lives "+n.Data.lives.toString()),n.Data.hud.coins.text="Coins "+n.Data.coins.toString(),this.spritesheetAnimationSet.currentAnimationName="spent")}}t.TileQuestionMark=o},function(e,t,i){"use strict";Object.defineProperty(t,"__esModule",{value:!0});const s=i(1),r=i(0);class n extends s.Tile{constructor(){super({hasCollider:!0,allowPassThrough:!1,breakFromBeneath:!1,spritesheetAnimationSet:new r.SpritesheetAnimationSet({spritesheetAnimations:{idle:new r.SpritesheetAnimation({imageSrc:s.Tile.spriteSheet,transforms:[new r.Transform({position:new r.Vector2(0,0),size:s.Tile.spriteSize})],msPerFrame:1e4,loop:!1})},startAnimationName:"idle"})})}}t.TileRocksBrown=n},function(e,t,i){"use strict";Object.defineProperty(t,"__esModule",{value:!0});const s=i(1),r=i(0);class n extends s.Tile{constructor(){super({hasCollider:!0,allowPassThrough:!1,breakFromBeneath:!1,spritesheetAnimationSet:new r.SpritesheetAnimationSet({spritesheetAnimations:{idle:new r.SpritesheetAnimation({imageSrc:s.Tile.spriteSheet,transforms:[new r.Transform({position:new r.Vector2(0,11*s.Tile.spriteSize.y),size:s.Tile.spriteSize})],msPerFrame:1e4,loop:!1})},startAnimationName:"idle"})})}}t.TileTubeBottomLeft=n},function(e,t,i){"use strict";Object.defineProperty(t,"__esModule",{value:!0});const s=i(1),r=i(0);class n extends s.Tile{constructor(){super({hasCollider:!0,allowPassThrough:!1,breakFromBeneath:!1,spritesheetAnimationSet:new r.SpritesheetAnimationSet({spritesheetAnimations:{idle:new r.SpritesheetAnimation({imageSrc:s.Tile.spriteSheet,transforms:[new r.Transform({position:new r.Vector2(s.Tile.spriteSize.x,11*s.Tile.spriteSize.y),size:s.Tile.spriteSize})],msPerFrame:1e4,loop:!1})},startAnimationName:"idle"})})}}t.TileTubeBottomRight=n},function(e,t,i){"use strict";Object.defineProperty(t,"__esModule",{value:!0});const s=i(1),r=i(0);class n extends s.Tile{constructor(){super({hasCollider:!0,allowPassThrough:!1,breakFromBeneath:!1,spritesheetAnimationSet:new r.SpritesheetAnimationSet({spritesheetAnimations:{idle:new r.SpritesheetAnimation({imageSrc:s.Tile.spriteSheet,transforms:[new r.Transform({position:new r.Vector2(0,10*s.Tile.spriteSize.y),size:s.Tile.spriteSize})],msPerFrame:1e4,loop:!1})},startAnimationName:"idle"})})}}t.TileTubeTopLeft=n},function(e,t,i){"use strict";Object.defineProperty(t,"__esModule",{value:!0});const s=i(1),r=i(0);class n extends s.Tile{constructor(){super({hasCollider:!0,allowPassThrough:!1,breakFromBeneath:!1,spritesheetAnimationSet:new r.SpritesheetAnimationSet({spritesheetAnimations:{idle:new r.SpritesheetAnimation({imageSrc:s.Tile.spriteSheet,transforms:[new r.Transform({position:new r.Vector2(s.Tile.spriteSize.x,10*s.Tile.spriteSize.y),size:s.Tile.spriteSize})],msPerFrame:1e4,loop:!1})},startAnimationName:"idle"})})}}t.TileTubeTopRight=n},function(e,t,i){"use strict";Object.defineProperty(t,"__esModule",{value:!0});const s=i(0);class r extends s.Level{constructor(e){super({managingGameObjectClass:e.managingGameObjectClass,imageSrcs:["Images/SpriteSheet.png","Images/SpriteSheetTiles.png","../Zelda/Images/SoldierBlue.png"],unitSize:50,hudUnitSize:25,backgroundColor:e.backgroundColor,extraViewportPadding:new s.Vector2(0,1/0)})}}t.PlayableLevel=r},function(e,t,i){"use strict";Object.defineProperty(t,"__esModule",{value:!0});const s=i(12);class r extends s.PlayableLevel{constructor(){super({managingGameObjectClass:s.Level01Controller,backgroundColor:"#5c94fc"})}}t.Level01=r},function(e,t,i){"use strict";Object.defineProperty(t,"__esModule",{value:!0});const s=i(12);class r extends s.LevelController{update(){this.handleCameraZoom()}constructor(){super({tileFlags:[["rb","rb"],["rb","rb"],["rb","rb"],["rb","rb"],["rb","rb"],["rb","rb","hlg","","","?"],["rb","rb","hcslg","htg"],["rb","rb","hrg"],["rb","rb","","","","","","","","cbl","ctl"],["rb","rb","","","","btb","","","","cb","ct"],["rb","rb","","","","?","","","","cbr","ctr"],["rb","rb","","","","btb","","","?"],["rb","rb","","","","?"],["rb","rb","","","","btb"],["rb","rb"],["rb","rb"],["rb","rb"],["rb","rb","tbl","ttl"],["rb","rb","tbr","ttr"],["rb","rb"],["rb","rb"],["rb","rb"],["rb","rb"],["rb","rb"],["rb","rb"],["rb","rb"],["rb","rb"],["rb","rb","tbl","tbl","ttl"],["rb","rb","tbr","tbr","ttr"],["rb","rb"],["rb","rb"],["rb","rb"],["rb","rb"],["rb","rb"],["rb","rb"],["rb","rb","tbl","tbl","tbl","ttl"],["rb","rb","tbr","tbr","tbr","ttr"],["rb","rb","hlg"],["rb","rb","hcslg","hlg"],["rb","rb","hcg","hcslg","htg"],["rb","rb","hcsrg","hrg"],["rb","rb","hrg"],["rb","rb"],["rb","rb"],["rb","rb"],["rb","rb"],["rb","rb","tbl","tbl","tbl","ttl"],["rb","rb","tbr","tbr","tbr","ttr"],["rb","rb"],["rb","rb"],["rb","rb"],["rb","rb"],["rb","rb"],["rb","rb","hlg"],["rb","rb","hcslg","htg"],["rb","rb","hrg"],["rb","rb"],["rb","rb"],[],[],["rb","rb"],["rb","rb"],["rb","rb"],["rb","rb"],["rb","rb"],["rb","rb"],["rb","rb","","","","btb"],["rb","rb","","","","?"],["rb","rb","","","","btb"],["rb","rb","","","","","","","","btb"],["rb","rb","","","","","","","","btb"],["rb","rb","","","","","","","","btb"],["rb","rb","","","","","","","","btb"],["rb","rb","","","","","","","","btb"],["rb","rb","","","","","","","","btb"],["","","","","","","","","","btb"],[],[],["rb","rb"],["rb","rb","","","","","","","","btb"],["rb","rb","","","","","","","","btb"],["rb","rb","","","","","","","","btb"],["rb","rb","","","","btb","","","","?"],["rb","rb"],["rb","rb"],["rb","rb"],["rb","rb"],["rb","rb"],["rb","rb","","","","btb"],["rb","rb","","","","btb"],["rb","rb"],["rb","rb"],["rb","rb"],["rb","rb"],["rb","rb","","","","?"],["rb","rb"],["rb","rb"],["rb","rb","","","","?","","","","?"],["rb","rb"],["rb","rb"],["rb","rb","","","","?"],["rb","rb"],["rb","rb"],["rb","rb"],["rb","rb"],["rb","rb"],["rb","rb","","","","btb"],["rb","rb","","","","","","","","btb"],["rb","rb","","","","","","","","btb"],["rb","rb","","","","","","","","btb"],["rb","rb"],["rb","rb"],["rb","rb"],["rb","rb"],["rb","rb","","","","","","","","btb"],["rb","rb","","","","btb","","","","?"],["rb","rb","","","","btb","","","","?"],["rb","rb","","","","","","","","btb"],["rb","rb"],["rb","rb"]]})}}t.Level01Controller=r},function(e,t,i){"use strict";Object.defineProperty(t,"__esModule",{value:!0});const s=i(0),r=i(23);t.froggerGameLauncher=function(){new s.GameLauncher({parentElementID:"game-holder",screenWidth:1e3,screenHeight:800,imageAntiAliasing:!1,layers:5,showDebug:!0,backgroundColor:"#000011",border:"1px solid #000088",allowToggleDebug:!0,levelClasses:{MainLevel:r.MainLevel}})}},function(e,t,i){"use strict";Object.defineProperty(t,"__esModule",{value:!0});const s=i(0),r=i(23);class n extends s.Level{constructor(){super({managingGameObjectClass:r.MainLevelController,imageSrcs:["Images/FroggerSpritesheet.png"],unitSize:100})}}t.MainLevel=n},function(e,t,i){"use strict";Object.defineProperty(t,"__esModule",{value:!0});const s=i(0),r=i(14);class n extends s.GameObject{constructor(){super({layer:0}),this.player=null,this.river=null,this.logs=[],this.test=null,this.river=new r.River,this.player=new r.Player;let e=this.river.transform.position.clone();e.y+=this.river.transform.size.y/2,e.y-=this.player.transform.size.y/2,this.player.setInitialPosition(e),this.player.goToInitialPosition(),s.Debug.trackGameObject(this.player),s.Debug.trackGameObject(this.river),this.buildLogs(),s.GameManager.camera.follow(this.player)}update(){s.Input.keys(s.Keys.Key1)&&s.GameManager.unitSize>5&&(s.GameManager.currentLevel.unitSize-=.5),s.Input.keys(s.Keys.Key2)&&s.GameManager.unitSize<500&&(s.GameManager.currentLevel.unitSize+=.5)}buildLogs(){for(let e=0;e<3;e++){let t=new r.LogSmall(e.toString());t.transform.position=new s.Vector2(this.player.transform.position.x,this.river.transform.position.y-.5+2*e),this.logs.push(t),s.Debug.trackGameObject(t)}}}t.MainLevelController=n},function(e,t,i){"use strict";Object.defineProperty(t,"__esModule",{value:!0});const s=i(0);class r extends s.GameObject{constructor(e){super({layer:1,name:e}),this.setDefaultCollider()}}t.LandingObject=r},function(e,t,i){"use strict";Object.defineProperty(t,"__esModule",{value:!0});const s=i(0),r=i(14);class n extends r.LandingObject{constructor(e){super(e);let t=new s.Vector2(389,258),i=new s.Vector2(183,57);this.spritesheetAnimationSet=new s.SpritesheetAnimationSet({spritesheetAnimations:{idle:new s.SpritesheetAnimation({imageSrc:"Images/FroggerSpritesheet.png",transforms:[new s.Transform({position:t,size:i})],msPerFrame:1e4,loop:!1})},startAnimationName:"idle"}),this.transform.size.x=2,this.collider.allowPassThroughWhitelist=[]}}t.LogSmall=n},function(e,t,i){"use strict";Object.defineProperty(t,"__esModule",{value:!0});const s=i(0);class r extends s.GameObject{constructor(){super({layer:2,name:null}),this.spriteSize=new s.Vector2(57,77),this.jumping=!1,this.pressedSpace=!1,this.jumpStartTime=0,this.jumpDuration=450,this.targetDestination=null,this.initialPosition=null,this.spritesheetAnimationSet=new s.SpritesheetAnimationSet({spritesheetAnimations:{idle:new s.SpritesheetAnimation({imageSrc:"Images/FroggerSpritesheet.png",transforms:[new s.Transform({position:new s.Vector2(0,0),size:this.spriteSize})],msPerFrame:1e4,loop:!1}),jumping:new s.SpritesheetAnimation({imageSrc:"Images/FroggerSpritesheet.png",transforms:[new s.Transform({position:new s.Vector2(this.spriteSize.x,0),size:this.spriteSize}),new s.Transform({position:new s.Vector2(2*this.spriteSize.x,0),size:this.spriteSize}),new s.Transform({position:new s.Vector2(3*this.spriteSize.x,0),size:this.spriteSize}),new s.Transform({position:new s.Vector2(4*this.spriteSize.x,0),size:this.spriteSize}),new s.Transform({position:new s.Vector2(5*this.spriteSize.x,0),size:this.spriteSize}),new s.Transform({position:new s.Vector2(0,0),size:this.spriteSize})],msPerFrame:75,loop:!1})},startAnimationName:"idle"}),this.collider=new s.RectCollider({position:new s.Vector2(0,.1),size:new s.Vector2(.8,.5)}),this.transform.size.x=.75}update(){this.handleInput(),this.targetDestination&&(this.transform.position=this.transform.position.moveTowards(this.targetDestination,.05),this.transform.position.equals(this.targetDestination)&&(this.targetDestination=null,this.spritesheetAnimationSet.currentAnimationName="idle")),this.jumping&&this.jumpStartTime+this.jumpDuration<=s.Time.time&&(this.jumping=!1)}setInitialPosition(e){this.initialPosition=e}goToInitialPosition(){this.transform.position=this.initialPosition.clone(),this.spritesheetAnimationSet.currentAnimationName="idle"}handleInput(){s.Input.keys(s.Keys.Space)&&!this.jumping&&(this.pressedSpace=!0);s.Input.keys(s.Keys.ArrowUp)&&(this.transform.position.y-=.1),s.Input.keys(s.Keys.ArrowDown)&&(this.transform.position.y+=.1),s.Input.keys(s.Keys.ArrowLeft)&&(this.transform.position.x-=.1),s.Input.keys(s.Keys.ArrowRight)&&(this.transform.position.x+=.1),s.Input.keys(s.Keys.KeyA)&&(this.transform.size.x-=.1),s.Input.keys(s.Keys.KeyD)&&(this.transform.size.x+=.1),s.Input.keys(s.Keys.KeyW)&&(this.transform.size.y+=.1),s.Input.keys(s.Keys.KeyS)&&(this.transform.size.y-=.1),s.Input.keys(s.Keys.KeyQ)&&(this.transform.rotation+=.1),s.Input.keys(s.Keys.KeyE)&&(this.transform.rotation-=.1),this.pressedSpace&&!s.Input.keys(s.Keys.Space)&&(this.spritesheetAnimationSet.currentAnimationName="jumping",this.pressedSpace=!1,this.jumping=!0,this.jumpStartTime=s.Time.time,this.targetDestination=this.transform.position.clone(),this.targetDestination.y-=1)}}t.Player=r},function(e,t,i){"use strict";Object.defineProperty(t,"__esModule",{value:!0});const s=i(0),r=i(14);class n extends s.GameObject{constructor(){super({layer:0}),this.blue="#003388",this.darkBlue="#002244",this.topBank=null,this.bottomBank=null,this.transform.size=new s.Vector2(16,16),this.topBank=new r.RiverBank,this.bottomBank=new r.RiverBank,this.topBank.transform.position.y=-this.transform.size.y/2+.5,this.bottomBank.transform.position.y=this.transform.size.y/2-.5}draw(){let e=this.transform,t=e.position.scale(this.unitSize),i=e.size.scale(this.unitSize);s.Canvas.fillRect(t,i,this.blue,!0);for(let e=-i.y/2;e<i.y/2;e+=this.unitSize)s.Canvas.fillRect(new s.Vector2(0,e),new s.Vector2(i.x,1),this.darkBlue,!0)}}t.River=n},function(e,t,i){"use strict";Object.defineProperty(t,"__esModule",{value:!0});const s=i(0);class r extends s.GameObject{constructor(){super({layer:1,shape:"rectangle",shapeFillStyle:"#654321"}),this.transform.size=new s.Vector2(16,1)}}t.RiverBank=r},function(e,t,i){"use strict";Object.defineProperty(t,"__esModule",{value:!0});const s=i(0),r=i(74);t.tetrisGameLauncher=function(){new s.GameLauncher({parentElementID:"game-holder",screenWidth:800,screenHeight:600,imageAntiAliasing:!1,layers:5,showDebug:!0,backgroundColor:"#330000",border:"1px solid red",allowToggleDebug:!0,levelClasses:{Tetris:r.TetrisLevel}})}},function(e,t,i){"use strict";Object.defineProperty(t,"__esModule",{value:!0});const s=i(0),r=i(75);class n extends s.Level{constructor(){super({managingGameObjectClass:r.TetrisController,extraViewportPadding:s.GameManager.screenSize.scale(5),unitSize:25})}}t.TetrisLevel=n},function(e,t,i){"use strict";Object.defineProperty(t,"__esModule",{value:!0});const s=i(0),r=i(76),n=i(77),o=i(78),a=i(79),l=i(80);class c extends s.GameObject{constructor(){super(),this.pieceTypes=[r.Cube,n.Line,o.LL,a.LR],this.keys={up:!1,down:!1,left:!1,right:!1},this.currentPiece=null,this.grid=null,this.grid=new l.Grid,s.Input.registerMouseDown(this,this.mousedown)}update(){if(null==this.currentPiece){let e=Math.floor(Math.random()*this.pieceTypes.length),t=this.pieceTypes[e];this.currentPiece=new t;let i=new s.Vector2(-Math.floor(this.currentPiece.arrangement[0].length/2),-this.grid.transform.size.y/2);this.grid.transform.size.x%2!=0&&(i.x-=.5),this.currentPiece.transform.position=i}this.currentPiece&&(this.handleInput(),this.currentPiece.transform.position.y>this.grid.transform.size.y/2&&s.GameManager.destroy(this.currentPiece)),s.Input.keys(s.Keys.Key1)&&s.GameManager.unitSize>5&&(s.GameManager.currentLevel.unitSize-=.5),s.Input.keys(s.Keys.Key2)&&s.GameManager.unitSize<500&&(s.GameManager.currentLevel.unitSize+=.5)}handleInput(){s.Input.keys(s.Keys.ArrowLeft)&&!this.keys.left&&(this.keys.left=!0,this.movePieceLeft()),!s.Input.keys(s.Keys.ArrowLeft)&&this.keys.left&&(this.keys.left=!1),s.Input.keys(s.Keys.ArrowRight)&&!this.keys.right&&(this.keys.right=!0,this.movePieceRight()),!s.Input.keys(s.Keys.ArrowRight)&&this.keys.right&&(this.keys.right=!1)}movePieceLeft(){this.currentPiece&&this.currentPiece.transform.position.x>-this.grid.transform.size.x/2&&this.currentPiece.transform.position.x--}movePieceRight(){if(this.currentPiece){let e=this.currentPiece.arrangement[0].length;this.currentPiece.transform.position.x+e<this.grid.transform.size.x/2&&this.currentPiece.transform.position.x++}}mousedown(e,t){console.log(e),console.log(t)}}t.TetrisController=c},function(e,t,i){"use strict";Object.defineProperty(t,"__esModule",{value:!0});const s=i(8);class r extends s.Piece{constructor(){super(),this.outerColor="#FF0000",this.innerColor="#fbb2b2",this.arrangement=[[!0,!0],[!0,!0]]}}t.Cube=r},function(e,t,i){"use strict";Object.defineProperty(t,"__esModule",{value:!0});const s=i(8);class r extends s.Piece{constructor(){super(),this.outerColor="#0000FF",this.innerColor="#bcd6ff",this.arrangement=[[!0],[!0],[!0],[!0]],this.arrangement=[[!0],[!0],[!0],[!0]]}}t.Line=r},function(e,t,i){"use strict";Object.defineProperty(t,"__esModule",{value:!0});const s=i(8);class r extends s.Piece{constructor(){super(),this.outerColor="#ce7b00",this.innerColor="#ffbe5e",this.arrangement=[[!1,!0],[!1,!0],[!0,!0]]}}t.LL=r},function(e,t,i){"use strict";Object.defineProperty(t,"__esModule",{value:!0});const s=i(8);class r extends s.Piece{constructor(){super(),this.outerColor="#b342f4",this.innerColor="#dca0ff",this.arrangement=[[!0,!1],[!0,!1],[!0,!0]]}}t.LR=r},function(e,t,i){"use strict";Object.defineProperty(t,"__esModule",{value:!0});const s=i(0);class r extends s.GameObject{constructor(){super(),this.layer=0,this.gridPieces=[];let e=this.transform;e.size=new s.Vector2(11,18),s.GameManager.camera.follow(this);for(let t=0;t<this.transform.size.y;t++){this.gridPieces.push([]);for(let i=0;i<this.transform.size.x;i++){let r=new s.GameObject({layer:1,shape:"rectangle",shapeStrokeStyle:"#aaaaaa",shapeFillStyle:"#000000"});r.transform.position=new s.Vector2(i-e.size.x/2,t-e.size.y/2),this.gridPieces[t].push(r)}}}update(){}draw(){}}t.Grid=r}]);